Ext.ns('Ext.ux','Ext.ux.form','Ext.ux.data','Ext.ux.grid');
//local_zh_CN
Ext.UpdateManager.defaults.indicatorText='<div class="loading-indicator">\u52a0\u8f7d\u4e2d...</div>';if(Ext.View){Ext.View.prototype.emptyText=""}if(Ext.grid.GridPanel){Ext.grid.GridPanel.prototype.ddText="{0} \u9009\u62e9\u884c"}if(Ext.TabPanelItem){Ext.TabPanelItem.prototype.closeText="\u5173\u95ed"}if(Ext.form.Field){Ext.form.Field.prototype.invalidText="\u8f93\u5165\u503c\u975e\u6cd5"}Date.monthNames=["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00","\u5341\u4e8c"];Date.dayNames=["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"];if(Ext.MessageBox){Ext.MessageBox.buttonText={ok:"\u786e\u5b9a",cancel:"\u53d6\u6d88",yes:"\u662f",no:"\u5426"}}if(Ext.util.Format){Ext.util.Format.date=function(v,a){if(!v)return"";if(!(v instanceof Date))v=new Date(Date.parse(v));return v.dateFormat(a||"y\u5e74m\u6708d\u65e5")}}if(Ext.DatePicker){Ext.apply(Ext.DatePicker.prototype,{todayText:"\u4eca\u5929",minText:"\u65e5\u671f\u5728\u6700\u5c0f\u65e5\u671f\u4e4b\u524d",maxText:"\u65e5\u671f\u5728\u6700\u5927\u65e5\u671f\u4e4b\u540e",disabledDaysText:"",disabledDatesText:"",monthNames:Date.monthNames,dayNames:Date.dayNames,nextText:'\u4e0b\u6708 (Control+Right)',prevText:'\u4e0a\u6708 (Control+Left)',monthYearText:'\u9009\u62e9\u4e00\u4e2a\u6708 (Control+Up/Down \u6765\u6539\u53d8\u5e74)',todayTip:"{0} (\u7a7a\u683c\u952e\u9009\u62e9)",format:"y\u5e74m\u6708d\u65e5",okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88"})}if(Ext.PagingToolbar){Ext.apply(Ext.PagingToolbar.prototype,{beforePageText:"",afterPageText:"\u9875/ {0} \u9875",firstText:"\u7b2c\u4e00\u9875",prevText:"\u524d\u4e00\u9875",nextText:"\u4e0b\u4e00\u9875",lastText:"\u6700\u540e\u9875",refreshText:"\u5237\u65b0",displayMsg:"\u663e\u793a {0} - {1}\uff0c\u5171 {2} \u6761",emptyMsg:'\u6ca1\u6709\u6570\u636e\u9700\u8981\u663e\u793a'})}if(Ext.form.TextField){Ext.apply(Ext.form.TextField.prototype,{minLengthText:"\u8be5\u8f93\u5165\u9879\u7684\u6700\u5c0f\u957f\u5ea6\u662f {0}",maxLengthText:"\u8be5\u8f93\u5165\u9879\u7684\u6700\u5927\u957f\u5ea6\u662f {0}",blankText:"\u8be5\u8f93\u5165\u9879\u4e3a\u5fc5\u8f93\u9879",regexText:"",emptyText:null})}if(Ext.form.NumberField){Ext.apply(Ext.form.NumberField.prototype,{minText:"\u8be5\u8f93\u5165\u9879\u7684\u6700\u5c0f\u503c\u662f {0}",maxText:"\u8be5\u8f93\u5165\u9879\u7684\u6700\u5927\u503c\u662f {0}",nanText:"{0} \u4e0d\u662f\u6709\u6548\u6570\u503c"})}if(Ext.form.DateField){Ext.apply(Ext.form.DateField.prototype,{disabledDaysText:"\u7981\u7528",disabledDatesText:"\u7981\u7528",minText:"\u8be5\u8f93\u5165\u9879\u7684\u65e5\u671f\u5fc5\u987b\u5728 {0} \u4e4b\u540e",maxText:"\u8be5\u8f93\u5165\u9879\u7684\u65e5\u671f\u5fc5\u987b\u5728 {0} \u4e4b\u524d",invalidText:"{0} \u662f\u65e0\u6548\u7684\u65e5\u671f - \u5fc5\u987b\u7b26\u5408\u683c\u5f0f\uff1a {1}",format:"y\u5e74m\u6708d\u65e5"})}if(Ext.form.ComboBox){Ext.apply(Ext.form.ComboBox.prototype,{loadingText:"\u52a0\u8f7d...",valueNotFoundText:undefined})}if(Ext.form.VTypes){Ext.apply(Ext.form.VTypes,{emailText:'\u8be5\u8f93\u5165\u9879\u5fc5\u987b\u662f\u7535\u5b50\u90ae\u4ef6\u5730\u5740\uff0c\u683c\u5f0f\u5982\uff1a "user@domain.com"',urlText:'\u8be5\u8f93\u5165\u9879\u5fc5\u987b\u662fURL\u5730\u5740\uff0c\u683c\u5f0f\u5982\uff1a "http:/'+'/www.domain.com"',alphaText:'\u8be5\u8f93\u5165\u9879\u53ea\u80fd\u5305\u542b\u5b57\u7b26\u548c_',alphanumText:'\u8be5\u8f93\u5165\u9879\u53ea\u80fd\u5305\u542b\u5b57\u7b26,\u6570\u5b57\u548c_'})}if(Ext.grid.GridView){Ext.apply(Ext.grid.GridView.prototype,{sortAscText:"\u6b63\u5e8f",sortDescText:"\u9006\u5e8f",lockText:"\u9501\u5217",unlockText:"\u89e3\u9501\u5217",columnsText:"\u5217"})}if(Ext.grid.PropertyColumnModel){Ext.apply(Ext.grid.PropertyColumnModel.prototype,{nameText:"\u540d\u79f0",valueText:"\u503c",dateFormat:"y\u5e74m\u6708d\u65e5"})}if(Ext.layout.BorderLayout&&Ext.layout.BorderLayout.SplitRegion){Ext.apply(Ext.layout.BorderLayout.SplitRegion.prototype,{splitTip:"\u62d6\u52a8\u6765\u6539\u53d8\u5c3a\u5bf8.",collapsibleSplitTip:"\u62d6\u52a8\u6765\u6539\u53d8\u5c3a\u5bf8. \u53cc\u51fb\u9690\u85cf."})}
Ext.BLANK_IMAGE_URL='/Magic/framework/resources/images/default/s.gif';

// for desk
Ext.namespace("Ext.ux.plugin");Ext.onReady(function(){var a=Ext.util.CSS;if(a){a.getRule(".x-hide-nosize")||a.createStyleSheet(".x-hide-nosize{height:0px!important;width:0px!important;border:none!important;zoom:1;}.x-hide-nosize * {height:0px!important;width:0px!important;border:none!important;zoom:1;}");a.refreshCache()}});(function(){var g=Ext.Element,b=Ext.lib.Anim,a=g.prototype;var f="visibility",d="display",c="hidden",h="none";var e={};e.El={setDisplayed:function(j){var i=this;i.visibilityCls?(i[j!==false?"removeClass":"addClass"](i.visibilityCls)):a.setDisplayed.call(i,j);return i},isDisplayed:function(){return !(this.hasClass(this.visibilityCls)||this.isStyle(d,h))},fixDisplay:function(){var i=this;a.fixDisplay.call(i);i.visibilityCls&&i.removeClass(i.visibilityCls)},isVisible:function(j){var k=this.visible||(!this.isStyle(f,c)&&(this.visibilityCls?!this.hasClass(this.visibilityCls):!this.isStyle(d,h)));if(j!==true||!k){return k}var l=this.dom.parentNode,i=/^body/i;while(l&&!i.test(l.tagName)){if(!Ext.fly(l,"_isVisible").isVisible()){return false}l=l.parentNode}return true},isStyle:a.isStyle||function(i,j){return this.getStyle(i)==j}};Ext.override(g.Flyweight,e.El);Ext.ux.plugin.VisibilityMode=function(j){Ext.apply(this,j||{});var i=Ext.util.CSS;if(i&&!Ext.isIE&&this.fixMaximizedWindow!==false&&!Ext.ux.plugin.VisibilityMode.MaxWinFixed){i.updateRule(".x-window-maximized-ct","overflow","");Ext.ux.plugin.VisibilityMode.MaxWinFixed=true}};Ext.extend(Ext.ux.plugin.VisibilityMode,Object,{bubble:true,fixMaximizedWindow:true,elements:null,visibilityCls:"x-hide-nosize",hideMode:"nosize",ptype:"uxvismode",init:function(m){var j=this.hideMode||m.hideMode,l=this,i=Ext.Container.prototype.bubble,k=function(){var p=[this.collapseEl,this.actionMode].concat(l.elements||[]);Ext.each(p,function(q){l.extend(this[q]||q)},this);var n={visFixed:true,animCollapse:false,animFloat:false,hideMode:j,defaults:this.defaults||{}};n.defaults.hideMode=j;Ext.apply(this,n);Ext.apply(this.initialConfig||{},n)};m.on("render",function(){if(l.bubble!==false&&this.ownerCt){i.call(this.ownerCt,function(){this.visFixed||this.on("afterlayout",k,this,{single:true})})}k.call(this)},m,{single:true})},extend:function(i,j){i&&Ext.each([].concat(i),function(k){if(k&&k.dom){if("visibilityCls" in k){return}Ext.apply(k,e.El);k.visibilityCls=j||this.visibilityCls}},this);return this}});Ext.preg&&Ext.preg("uxvismode",Ext.ux.plugin.VisibilityMode);Ext.provide&&Ext.provide("uxvismode")})();(function(){var G=Ext.Element,n,u=Ext.lib.Dom,aj=Ext.lib.Anim,m=Ext.EventManager,ah=Ext.lib.Event,al=document,t=function(){},an=Object.prototype,ay=an.toString,q="[object HTMLDocument]";if(!Ext.elCache||parseInt(Ext.version.replace(/\./g,""),10)<311){alert("Ext Release "+Ext.version+" is not supported")}Ext._documents={};Ext._documents[Ext.id(document,"_doc")]=Ext.elCache;var Q=u.resolveDocumentCache=function(E,aF){var aD=e(E),aG=Ext.isDocument(aD)?Ext.id(aD):aF,A=Ext._documents[aG]||null,aE,aC;if(!A&&aD&&(aC=aD.parentWindow||aD.defaultView)){if(aE=aC.frameElement){aG=aE.id||aE.name}}return A||Ext._documents[aG]||(aG?Ext._documents[aG]={}:null)},aB=u.clearDocumentCache=function(A){delete Ext._documents[A]};G.addMethods||(G.addMethods=function(A){Ext.apply(G.prototype,A||{})});Ext.removeNode=function(aF){var aE=aF?aF.dom||aF:null;if(aE&&aE.tagName!="BODY"){var aC,aD,A=Q(aE),E;if((aD=A[aE.id])&&(aC=aD.el)){if(aC.dom){Ext.enableNestedListenerRemoval?m.purgeElement(aC.dom,true):m.removeAll(aC.dom)}delete A[aE.id];delete aC.dom;delete aC._context;aC=null}(E=aE.parentElement||aE.parentNode)&&E.removeChild(aE);aE=null}};var f=function(aG,aE){var aF=typeof aG==="function"?aG:function aD(){};var aC=aF._ovl;if(!aC){aC={base:aF};aC[aF.length||0]=aF;aF=function aD(){var aJ=arguments.callee._ovl;var aI=aJ[arguments.length]||aJ.base;return aI&&aI!=arguments.callee?aI.apply(this,arguments):undefined}}var aH=[].concat(aE);for(var E=0,A=aH.length;E<A;++E){aC[aH[E].length]=aH[E]}aF._ovl=aC;var aD=null;return aF};Ext.applyIf(Ext,{overload:f(f,[function(A){return f(null,A)},function(aC,E,A){return aC[E]=f(aC[E],A)}]),isArray:function(A){return !!A&&ay.apply(A)=="[object Array]"},isObject:function(A){return !!A&&typeof A=="object"},isDocument:function(E,A){var aE=E?E.dom||E:null;var aD=aE&&((ay.apply(aE)==q)||(aE&&aE.nodeType==9));if(aD&&A){try{aD=!!aE.location}catch(aC){return false}}return aD},isWindow:function(A){var E=A?A.dom||A:null;return E?!!E.navigator||ay.apply(E)=="[object Window]":false},isIterable:function(A){if(Ext.isArray(A)||A.callee){return true}if(/NodeList|HTMLCollection/.test(ay.call(A))){return true}return((typeof A.nextNode!="undefined"||A.item)&&Ext.isNumber(A.length))},isElement:function(A){return A&&Ext.type(A)=="element"},isEvent:function(A){return ay.apply(A)=="[object Event]"||(Ext.isObject(A)&&!Ext.type(o.constructor)&&(window.event&&A.clientX&&A.clientX==window.event.clientX))},isFunction:function(A){return !!A&&typeof A=="function"},isEventSupported:function(aD,aE){var aC={select:"input",change:"input",submit:"form",reset:"form",load:"img",error:"img",abort:"img"},A={},aF=/^on/i,E=function(aI,aH){var aG=Ext.getDom(aH);return(aG?(Ext.isElement(aG)||Ext.isDocument(aG)?aG.nodeName.toLowerCase():aH.self?"#window":aH||"#object"):aH||"div")+":"+aI};return function(aK,aM){aK=(aK||"").replace(aF,"");var aL,aJ=false;var aH="on"+aK;var aG=(aM?aM:aC[aK])||"div";var aI=E(aK,aG);if(aI in A){return A[aI]}aL=Ext.isString(aG)?al.createElement(aG):aM;aJ=(!!aL&&(aH in aL));aJ||(aJ=window.Event&&!!(String(aK).toUpperCase() in window.Event));if(!aJ&&aL){aL.setAttribute&&aL.setAttribute(aH,"return;");aJ=Ext.isFunction(aL[aH])}A[aI]=aJ;aL=null;return aJ}}()});var am=function(A){return G;return G[(A.tagName||"-").toUpperCase()]||G};var D;function ag(A,E){if(!D){D=new Ext.Element.Flyweight()}D.dom=Ext.getDom(A,null,E);return D}Ext.apply(Ext,{get:G.get=function(aD,aI){if(!aD){return null}var aH=Ext.isDocument(aD);Ext.isDocument(aI)||(aI=al);var aG,aF,E,A=Q(aI);if(typeof aD=="string"){aF=Ext.getDom(aD,null,aI);if(!aF){return null}if(A[aD]&&A[aD].el){aG=A[aD].el;aG.dom=aF}else{aG=G.addToCache(new (am(aF))(aF,null,aI))}return aG}else{if(aH){if(!Ext.isDocument(aD,true)){return false}A=Q(aD);if(A[Ext.id(aD)]&&A[aD.id].el){return A[aD.id].el}var aE=function(){};aE.prototype=G.prototype;var aC=new aE();aC.dom=aD;aC.id=Ext.id(aD,"_doc");aC._isDoc=true;G.addToCache(aC,null,A);A[aC.id].skipGC=true;return aC}else{if(aD instanceof G){if(aD.dom){aD.id=Ext.id(aD.dom)}else{aD.dom=aD.id?Ext.getDom(aD.id,true):null}if(aD.dom){A=Q(aD);(A[aD.id]||(A[aD.id]={data:{},events:{}})).el=aD}return aD}else{if(aD.tagName||Ext.isWindow(aD)){A=Q(aD);E=Ext.id(aD);if(A[E]&&(aG=A[E].el)){aG.dom=aD}else{aG=G.addToCache(new (am(aD))(aD,null,aI),null,A);aD.navigator&&(A[E].skipGC=true)}return aG}else{if(aD.isComposite){return aD}else{if(Ext.isArray(aD)){return Ext.get(aI,aI).select(aD)}}}}}}return null},getDom:function(E,A,aE){var aD=aE||al;if(!E||!aD){return null}if(E.dom){return E.dom}else{if(Ext.isString(E)){var aC=aD.getElementById(E);if(aC&&Ext.isIE&&A){if(E==aC.getAttribute("id")){return aC}else{return null}}return aC}else{return E}}},getBody:function(E){var A=u.getDocument(E)||al;return Ext.get(A.body||A.documentElement)},getDoc:Ext.overload([Ext.getDoc,function(A){return Ext.get(A,A)}])});G.data=function(E,A,aC){E=G.get(E);if(!E){return null}var aD=Q(E)[E.id].data;if(arguments.length==2){return aD[A]}else{return(aD[A]=aC)}};G.addToCache=function(E,aD,A){aD=aD||E.id;var aC=A||Q(E);aC[aD]={el:E,data:{},events:{}};return E};G.NOSIZE=3;var ap={},I=/(-[a-z])/gi,C=function(A,E){return E.charAt(1).toUpperCase()},i=/alpha\(opacity=(.*)\)/i,l=/^\s+|\s+$/g,aw=/marginRight/,y=Ext.isIE?"styleFloat":"cssFloat",aq=al.defaultView,Z="visibilityMode",v=G.DISPLAY,h=G.VISIBILITY,at=G.NOSIZE,J="originalDisplay",aa="padding",N="margin",au="border",c="-left",j="-right",p="-top",ar="-bottom",M="-width",ax=Math,V="opacity",U="visibility",H="display",ae="offsets",x="nosize",ab="hidden",W="none",T="isVisible",w="isClipped",d="overflow",P="overflow-x",O="overflow-y",z="originalClip",L="x-masked",B="x-masked-relative",af={l:au+c+M,r:au+j+M,t:au+p+M,b:au+ar+M},ak={l:aa+c,r:aa+j,t:aa+p,b:aa+ar},r={l:N+c,r:N+j,t:N+p,b:N+ar},F=G.data,az=Ext.getDom,s=Ext.get,ad=Ext.DomHelper,X=/^(?:scope|delay|buffer|single|stopEvent|preventDefault|stopPropagation|normalized|args|delegate)$/,aA=Ext.util.CSS,ai=function(E){var A=F(E,J);if(A===undefined){F(E,J,A="")}return A},k=function(E){var A=F(E,Z);if(A===undefined){F(E,Z,A=1)}return A};function ao(A){return ap[A]||(ap[A]=A=="float"?y:A.replace(I,C))}G.addMethods({getDocument:function(){return this._context||(this._context=e(this))},remove:function(E,A){var aC=this.dom;this.isMasked()&&this.unmask();if(aC){Ext.removeNode(aC);delete this._context;delete this.dom}},appendChild:function(A,E){return s(A,E||this.getDocument()).appendTo(this)},appendTo:function(A,E){az(A,false,E||this.getDocument()).appendChild(this.dom);return this},insertBefore:function(A,E){(A=az(A,false,E||this.getDocument())).parentNode.insertBefore(this.dom,A);return this},insertAfter:function(A,E){(A=az(A,false,E||this.getDocument())).parentNode.insertBefore(this.dom,A.nextSibling);return this},insertFirst:function(E,A){E=E||{};if(E.nodeType||E.dom||typeof E=="string"){E=az(E);this.dom.insertBefore(E,this.dom.firstChild);return !A?s(E):E}else{return this.createChild(E,this.dom.firstChild,A)}},replace:function(A,E){A=s(A,E||this.getDocument());this.insertBefore(A);A.remove();return this},replaceWith:function(A,aC){var E=this;if(A.nodeType||A.dom||typeof A=="string"){A=az(A,false,aC||E.getDocument());E.dom.parentNode.insertBefore(A,E.dom)}else{A=ad.insertBefore(E.dom,A)}var aD=Q(E);Ext.removeNode(E.dom);E.id=Ext.id(E.dom=A);G.addToCache(E.isFlyweight?new (am(E.dom))(E.dom,null,aD):E);return E},insertHtml:function(E,aC,A){var aD=ad.insertHtml(E,this.dom,aC);return A?Ext.get(aD,e(aD)):aD},setVisibilityMode:function(A){F(this.dom,Z,A);return this},isVisible:function(){return this.visible||Ext.value(F(this.dom,T),!this.isStyle(U,ab)&&!this.isStyle(H,W))},setVisible:function(aD,A){var aG=this,aE=aG.dom,E,aI,aH,aF;if(typeof A=="string"){E=A==H;aI=A==U;aH=A==ae;aF=A==x;A=false}else{var aC=k(aE);E=aC==v;aI=aC==h;aF=aC==at}if(!A||!aG.anim){if(aF){if(!aD){aG.hideModeStyles={width:aG.getWidth(),height:aG.getHeight()};aG.applyStyles({width:"0px",height:"0px"})}else{aG.applyStyles(aG.hideModeStyles||{width:"auto",height:"auto"})}}else{if(E){aG.setDisplayed(aD)}else{if(aH){if(!aD){aG.hideModeStyles={position:aG.getStyle("position"),top:aG.getStyle("top"),left:aG.getStyle("left")};aG.applyStyles({position:"absolute",top:"-10000px",left:"-10000px"})}else{aG.applyStyles(aG.hideModeStyles||{position:"",top:"",left:""})}}else{aG.fixDisplay();aE.style.visibility=aD?"visible":ab}}}}else{if(aD){aG.setOpacity(0.01);aG.setVisible(true)}aG.anim({opacity:{to:(aD?1:0)}},aG.preanim(arguments,1),null,0.35,"easeIn",function(){if(!aD){aE.style[E?H:U]=(E)?W:ab;Ext.fly(aE).setOpacity(1)}})}F(aE,T,aD);return aG},setDisplayed:function(A){if(typeof A=="boolean"){F(this.dom,T,A);A=A?ai(this.dom):W}this.setStyle(H,A);return this},fixDisplay:function(){var A=this;if(A.isStyle(H,W)){A.setStyle(U,ab);A.setStyle(H,ai(A.dom));if(A.isStyle(H,W)){A.setStyle(H,"block")}}},enableDisplayMode:function(A){this.setVisibilityMode(G.DISPLAY);if(!Ext.isEmpty(A)){F(this.dom,J,A)}return this},scrollIntoView:function(aC,aF){var aK=this.getDocument();var aL=Ext.getDom(aC,null,aK)||Ext.getBody(aK).dom;var aE=this.dom;var aD=this.getOffsetsTo(aL),aP=this.getScroll(),aH=aD[0]+aP.left,aO=aD[1]+aP.top,aM=aO+aE.offsetHeight,E=aH+aE.offsetWidth;var A=aL.clientHeight;var aI=parseInt(aL.scrollTop,10);var aN=parseInt(aL.scrollLeft,10);var aG=aI+A;var aJ=aN+aL.clientWidth;if(aE.offsetHeight>A||aO<aI){aL.scrollTop=aO}else{if(aM>aG){aL.scrollTop=aM-A}}aL.scrollTop=aL.scrollTop;if(aF!==false){if(aE.offsetWidth>aL.clientWidth||aH<aN){aL.scrollLeft=aH}else{if(E>aJ){aL.scrollLeft=E-aL.clientWidth}}aL.scrollLeft=aL.scrollLeft}return this},contains:function(A){try{return !A?false:u.isAncestor(this.dom,A.dom?A.dom:A)}catch(E){return false}},getScroll:function(){var aG=this.dom,aF=this.getDocument(),A=aF.body,aC=aF.documentElement,E,aE,aD;if(Ext.isDocument(aG)||aG==A){if(Ext.isIE&&u.docIsStrict(aF)){E=aC.scrollLeft;aE=aC.scrollTop}else{E=window.pageXOffset;aE=window.pageYOffset}aD={left:E||(A?A.scrollLeft:0),top:aE||(A?A.scrollTop:0)}}else{aD={left:aG.scrollLeft,top:aG.scrollTop}}return aD},getStyle:function(){var A=aq&&aq.getComputedStyle?function E(aI){var aF=!this._isDoc?this.dom:null,aC,aE,aD,aG,aH=Ext.isWebKit,aG;if(!aF||!aF.style){return null}aI=ao(aI);aD=(aC=aF.style[aI])?aC:(aE=aq.getComputedStyle(aF,""))?aE[aI]:null;if(aH&&aw.test(aI)&&aD!="0px"){aG=this.getStyle("display");aF.style.display="inline-block";aD=aq.getComputedStyle(aF,"");aF.style.display=aG}if(aH&&aD=="rgba(0, 0, 0, 0)"){aD="transparent"}return aD}:function E(aG){var aE=!this._isDoc?this.dom:null,aC,aD;if(!aE||!aE.style){return null}if(aG==V){if(aE.style.filter.match){if(aC=aE.style.filter.match(i)){var aF=parseFloat(aC[1]);if(!isNaN(aF)){return aF?aF/100:0}}}return 1}aG=ao(aG);return aE.style[aG]||((aD=aE.currentStyle)?aD[aG]:null)};var E=null;return A}(),setStyle:function(aE,aD){if(this._isDoc||Ext.isDocument(this.dom)){return this}var E,aC,A;if(!Ext.isObject(aE)){E={};E[aE]=aD;aE=E}for(aC in aE){aD=aE[aC];aC==V?this.setOpacity(aD):this.dom.style[ao(aC)]=aD}return this},center:function(A){return this.alignTo(A||this.getDocument(),"c-c")},mask:function(E,aF){var aH=this,aD=aH.dom,aG=Ext.DomHelper,aE="ext-el-mask-msg",A,aI;if(aH.getStyle("position")=="static"){aH.addClass(B)}if((A=F(aD,"maskMsg"))){A.remove()}if((A=F(aD,"mask"))){A.remove()}aI=aG.append(aD,{cls:"ext-el-mask"},true);F(aD,"mask",aI);aH.addClass(L);aI.setDisplayed(true);if(typeof E=="string"){var aC=aG.append(aD,{cls:aE,cn:{tag:"div"}},true);F(aD,"maskMsg",aC);aC.dom.className=aF?aE+" "+aF:aE;aC.dom.firstChild.innerHTML=E;aC.setDisplayed(true);aC.center(aH)}if(Ext.isIE&&!(Ext.isIE7&&Ext.isStrict)&&aH.getStyle("height")=="auto"){aI.setSize(undefined,aH.getHeight())}return aI},unmask:function(){var aC=this,aD=aC.dom,A=F(aD,"mask"),E=F(aD,"maskMsg");if(A){if(E){E.remove();F(aD,"maskMsg",undefined)}A.remove();F(aD,"mask",undefined)}aC.removeClass([L,B])},isMasked:function(){var A=F(this.dom,"mask");return A&&A.isVisible()},getCenterXY:function(){return this.getAlignToXY(this.getDocument(),"c-c")},getAnchorXY:function(aE,aJ,aO){aE=(aE||"tl").toLowerCase();aO=aO||{};var aI=this,aL=this.getDocument(),E=aI.dom==aL.body||aI.dom==aL,aM=aO.width||E?u.getViewWidth(false,aL):aI.getWidth(),aG=aO.height||E?u.getViewHeight(false,aL):aI.getHeight(),aN,A=Math.round,aC=aI.getXY(),aK=aI.getScroll(),aH=E?aK.left:!aJ?aC[0]:0,aF=E?aK.top:!aJ?aC[1]:0,aD={c:[A(aM*0.5),A(aG*0.5)],t:[A(aM*0.5),0],l:[0,A(aG*0.5)],r:[aM,A(aG*0.5)],b:[A(aM*0.5),aG],tl:[0,0],bl:[0,aG],br:[aM,aG],tr:[aM,0]};aN=aD[aE];return[aN[0]+aH,aN[1]+aF]},anchorTo:function(E,aF,aC,A,aH,aI){var aG=this,aE=aG.dom;function aD(){ag(aE).alignTo(E,aF,aC,A);Ext.callback(aI,ag(aE))}Ext.EventManager.onWindowResize(aD,aG);if(!Ext.isEmpty(aH)){Ext.EventManager.on(window,"scroll",aD,aG,{buffer:!isNaN(aH)?aH:50})}aD.call(aG);return aG},getScroll:function(){var aG=this.dom,aF=this.getDocument(),A=aF.body,aC=aF.documentElement,E,aE,aD;if(aG==aF||aG==A){if(Ext.isIE&&u.docIsStrict(aF)){E=aC.scrollLeft;aE=aC.scrollTop}else{E=window.pageXOffset;aE=window.pageYOffset}aD={left:E||(A?A.scrollLeft:0),top:aE||(A?A.scrollTop:0)}}else{aD={left:aG.scrollLeft,top:aG.scrollTop}}return aD},getAlignToXY:function(aD,aP,aQ){var a4;aD=Ext.get(aD,a4=this.getDocument());if(!aD||!aD.dom){throw"Element.getAlignToXY with an element that doesn't exist"}aQ=aQ||[0,0];aP=(aP=="?"?"tl-bl?":(!/-/.test(aP)&&aP!=""?"tl-"+aP:aP||"tl-bl")).toLowerCase();var aZ=this,aW=aZ.dom,a3,a0,aI,aH,aK,aU,aN,aL=u.getViewWidth(false,a4)-10,aV=u.getViewHeight(false,a4)-10,E,aE,aF,aG,aM,aO,aY=a4.documentElement,aJ=a4.body,aT=(aY.scrollLeft||aJ.scrollLeft||0)+5,aS=(aY.scrollTop||aJ.scrollTop||0)+5,aX=false,aC="",A="",aR=aP.match(/^([a-z]+)-([a-z]+)(\?)?$/);if(!aR){throw"Element.getAlignToXY with an invalid alignment "+aP}aC=aR[1];A=aR[2];aX=!!aR[3];a3=aZ.getAnchorXY(aC,true);a0=aD.getAnchorXY(A,false);aI=a0[0]-a3[0]+aQ[0];aH=a0[1]-a3[1]+aQ[1];if(aX){aK=aZ.getWidth();aU=aZ.getHeight();aN=aD.getRegion();E=aC.charAt(0);aE=aC.charAt(aC.length-1);aF=A.charAt(0);aG=A.charAt(A.length-1);aM=((E=="t"&&aF=="b")||(E=="b"&&aF=="t"));aO=((aE=="r"&&aG=="l")||(aE=="l"&&aG=="r"));if(aI+aK>aL+aT){aI=aO?aN.left-aK:aL+aT-aK}if(aI<aT){aI=aO?aN.right:aT}if(aH+aU>aV+aS){aH=aM?aN.top-aU:aV+aS-aU}if(aH<aS){aH=aM?aN.bottom:aS}}return[aI,aH]},adjustForConstraints:function(aC,A,E){return this.getConstrainToXY(A||this.getDocument(),false,E,aC)||aC},getConstrainToXY:function(E,A,aC,aE){var aD={top:0,left:0,bottom:0,right:0};return function(aG,aT,aI,aK){var aX=this.getDocument();aG=Ext.get(aG,aX);aI=aI?Ext.applyIf(aI,aD):aD;var aS,aW,aR=0,aQ=0;if(aG.dom==aX.body||aG.dom==aX){aS=u.getViewWidth(false,aX);aW=u.getViewHeight(false,aX)}else{aS=aG.dom.clientWidth;aW=aG.dom.clientHeight;if(!aT){var aP=aG.getXY();aR=aP[0];aQ=aP[1]}}var aO=aG.getScroll();aR+=aI.left+aO.left;aQ+=aI.top+aO.top;aS-=aI.right;aW-=aI.bottom;var aU=aR+aS;var aF=aQ+aW;var aH=aK||(!aT?this.getXY():[this.getLeft(true),this.getTop(true)]);var aM=aH[0],aL=aH[1];var aN=this.dom.offsetWidth,aV=this.dom.offsetHeight;var aJ=false;if((aM+aN)>aU){aM=aU-aN;aJ=true}if((aL+aV)>aF){aL=aF-aV;aJ=true}if(aM<aR){aM=aR;aJ=true}if(aL<aQ){aL=aQ;aJ=true}return aJ?[aM,aL]:false}}(),getCenterXY:function(){return this.getAlignToXY(Ext.getBody(this.getDocument()),"c-c")},center:function(A){return this.alignTo(A||Ext.getBody(this.getDocument()),"c-c")},findParent:function(aH,aG,E){var aE=this.dom,aD=this.getDocument(),A=aD.body,aF=0,aC;if(Ext.isGecko&&ay.call(aE)=="[object XULElement]"){return null}aG=aG||50;if(isNaN(aG)){aC=Ext.getDom(aG,null,aD);aG=Number.MAX_VALUE}while(aE&&aE.nodeType==1&&aF<aG&&aE!=A&&aE!=aC){if(Ext.DomQuery.is(aE,aH)){return E?Ext.get(aE,aD):aE}aF++;aE=aE.parentNode}return null},clip:function(){var A=this,E=A.dom;if(!F(E,w)){F(E,w,true);F(E,z,{o:A.getStyle(d),x:A.getStyle(P),y:A.getStyle(O)});A.setStyle(d,ab);A.setStyle(P,ab);A.setStyle(O,ab)}return A},unclip:function(){var A=this,aC=A.dom;if(F(aC,w)){F(aC,w,false);var E=F(aC,z);if(E.o){A.setStyle(d,E.o)}if(E.x){A.setStyle(P,E.x)}if(E.y){A.setStyle(O,E.y)}}return A},getViewSize:function(){var aC=this.getDocument(),aD=this.dom,A=(aD==aC||aD==aC.body);if(A){var E=Ext.lib.Dom;return{width:E.getViewWidth(),height:E.getViewHeight()}}else{return{width:aD.clientWidth,height:aD.clientHeight}}},getStyleSize:function(){var aE=this,A,aD,aG=this.getDocument(),aH=this.dom,E=(aH==aG||aH==aG.body),aC=aH.style;if(E){var aF=Ext.lib.Dom;return{width:aF.getViewWidth(),height:aF.getViewHeight()}}if(aC.width&&aC.width!="auto"){A=parseFloat(aC.width);if(aE.isBorderBox()){A-=aE.getFrameWidth("lr")}}if(aC.height&&aC.height!="auto"){aD=parseFloat(aC.height);if(aE.isBorderBox()){aD-=aE.getFrameWidth("tb")}}return{width:A||aE.getWidth(true),height:aD||aE.getHeight(true)}}});Ext.isDefined(G.collectorThreadId)&&clearInterval(G.collectorThreadId);function ac(){if(!Ext.enableGarbageCollector){clearInterval(G.collectorThreadId)}else{var A,aD,aF,aE,aC=Ext.elCache;for(A in aC){aE=aC[A];if(aE.skipGC){continue}aD=aE.el;aF=aD.dom;if(!aF||!aF.parentNode||(!aF.offsetParent&&!al.getElementById(A))){if(Ext.enableListenerCollection){Ext.EventManager.removeAll(aF)}delete aC[A]}}if(Ext.isIE){var E={};for(A in aC){E[A]=aC[A]}Ext.elCache=Ext._documents[Ext.id(document)]=E;E=null}}}if(Ext.enableGarbageCollector){G.collectorThreadId=setInterval(ac,30000)}Ext.apply(u,{getDocument:function(aC,aD){var aE=null;try{aE=Ext.getDom(aC,null,null)}catch(E){}var A=Ext.isDocument(aE);if(A){if(aD){return Ext.isDocument(aE,aD)?aE:null}return aE}return aE?aE.ownerDocument||aE.document:null},docIsStrict:function(A){return(Ext.isDocument(A)?A:this.getDocument(A)).compatMode=="CSS1Compat"},getViewWidth:Ext.overload([u.getViewWidth||function(A){},function(){return this.getViewWidth(false)},function(A,E){return A?this.getDocumentWidth(E):this.getViewportWidth(E)}]),getViewHeight:Ext.overload([u.getViewHeight||function(A){},function(){return this.getViewHeight(false)},function(A,E){return A?this.getDocumentHeight(E):this.getViewportHeight(E)}]),getDocumentHeight:Ext.overload([u.getDocumentHeight||t,function(A){if(A=this.getDocument(A)){return Math.max(!this.docIsStrict(A)?A.body.scrollHeight:A.documentElement.scrollHeight,this.getViewportHeight(A))}return undefined}]),getDocumentWidth:Ext.overload([u.getDocumentWidth||t,function(A){if(A=this.getDocument(A)){return Math.max(!this.docIsStrict(A)?A.body.scrollWidth:A.documentElement.scrollWidth,this.getViewportWidth(A))}return undefined}]),getViewportHeight:Ext.overload([u.getViewportHeight||t,function(A){if(A=this.getDocument(A)){if(Ext.isIE){return this.docIsStrict(A)?A.documentElement.clientHeight:A.body.clientHeight}else{return A.defaultView.innerHeight}}return undefined}]),getViewportWidth:Ext.overload([u.getViewportWidth||t,function(A){if(A=this.getDocument(A)){return !this.docIsStrict(A)&&!Ext.isOpera?A.body.clientWidth:Ext.isIE?A.documentElement.clientWidth:A.defaultView.innerWidth}return undefined}]),getXY:Ext.overload([u.getXY||t,function(A,aD){A=Ext.getDom(A,null,aD);var aC=this.getDocument(A),E=aC?(aC.body||aC.documentElement):null;if(!A||!E||A==E){return[0,0]}return this.getXY(A)}])});var e=u.getDocument,K=G._flyweights;Ext.fly=G.fly=function(aC,A,aD){var E=null;A=A||"_global";if(aC=Ext.getDom(aC,null,aD)){(E=K[A]=(K[A]||new G.Flyweight())).dom=aC;Ext.isDocument(aC)&&(E._isDoc=true)}return E};var av=function(){};av.prototype=G.prototype;G.Flyweight=function(A){this.dom=A};G.Flyweight.prototype=new av();G.Flyweight.prototype.isFlyweight=true;function b(aC,aE,aH,aD,E,aJ){aC=Ext.getDom(aC);if(!aC){return}var A=Ext.id(aC),aI=(Q(aC)[A]||{}).events||{},aF;aF=ah.on(aC,aE,E);aI[aE]=aI[aE]||[];aI[aE].push([aH,E,aJ,aF,aD]);if(aC.addEventListener&&aE=="mousewheel"){var aG=["DOMMouseScroll",E,false];aC.addEventListener.apply(aC,aG);Ext.EventManager.addListener(window,"beforeunload",function(){aC.removeEventListener.apply(aC,aG)})}if(aE=="mousedown"&&Ext.isDocument(aC)){Ext.EventManager.stoppedMouseDownEvent.addListener(E)}}function g(A,E){return function(){var aC=Ext.toArray(arguments);if(E.target==Ext.EventObject.setEvent(aC[0]).target){A.apply(this,aC)}}}function Y(E,aC,A){return function(aD){A.delay(aC.buffer,E,null,[new Ext.EventObjectImpl(aD)])}}function S(aE,aD,A,aC,E){return function(aF){Ext.EventManager.removeListener(aD,A,aC,E);aE(aF)}}function a(E,aC,A){return function(aE){var aD=new Ext.util.DelayedTask(E);(A.tasks||(A.tasks=[])).push(aD);aD.delay(aC.delay||10,E,null,[new Ext.EventObjectImpl(aE)])}}function R(aF,aE,A,aH,aI){var E=!Ext.isObject(A)?{}:A,aC=Ext.getDom(aF),aD;aH=aH||E.fn;aI=aI||E.scope;if(!aC){throw'Error listening for "'+aE+'". Element "'+aF+"\" doesn't exist."}function aG(aK){if(!window.Ext){return}aK=Ext.EventObject.setEvent(aK);var aJ;if(E.delegate){if(!(aJ=aK.getTarget(E.delegate,aC))){return}}else{aJ=aK.target}if(E.stopEvent){aK.stopEvent()}if(E.preventDefault){aK.preventDefault()}if(E.stopPropagation){aK.stopPropagation()}if(E.normalized){aK=aK.browserEvent}aH.call(aI||aC,aK,aJ,E)}if(E.target){aG=g(aG,E)}if(E.delay){aG=a(aG,E,aH)}if(E.single){aG=S(aG,aC,aE,aH,aI)}if(E.buffer){aD=new Ext.util.DelayedTask(aG);aG=Y(aG,E,aD)}b(aC,aE,aH,aD,aG,aI);return aG}Ext.apply(m,{addListener:m.on=function(aC,A,aE,aD,E){if(Ext.isObject(A)){var aH=A,aF,aG;for(aF in aH){aG=aH[aF];if(!X.test(aF)){if(Ext.isFunction(aG)){R(aC,aF,aH,aG,aH.scope)}else{R(aC,aF,aG)}}}}else{R(aC,A,E,aE,aD)}},removeListener:m.un=function(aF,aG,aK,aM){var E=Ext.getDom(aF);E&&Ext.get(E);var aL=E?Q(E):{},aI=E&&((aL[E.id]||{events:{}}).events)[aG]||[],A,aE,aC,aD,aH,aJ;for(aE=0,aH=aI.length;aE<aH;aE++){if(Ext.isArray(aJ=aI[aE])&&aJ[0]==aK&&(!aM||aJ[2]==aM)){aJ[4]&&aJ[4].cancel();aD=aK.tasks&&aK.tasks.length;if(aD){while(aD--){aK.tasks[aD].cancel()}delete aK.tasks}A=aJ[1];ah.un(E,aG,ah.extAdapter?aJ[3]:A);if(A&&aG=="mousewheel"&&E.addEventListener){E.removeEventListener("DOMMouseScroll",A,false)}if(A&&aG=="mousedown"&&Ext.isDocument(E)){Ext.EventManager.stoppedMouseDownEvent.removeListener(A)}aI.splice(aE,1);if(aI.length===0){delete aL[E.id].events[aG]}for(aD in aL[E.id].events){return false}aL[E.id].events={};return false}}},removeAll:function(aC){if(!(aC=Ext.getDom(aC))){return}var E=aC.id,aK=Q(aC)||{},aL=aK[E]||{},aJ=aL.events||{},aG,aF,aH,aD,aI,aE,A;for(aD in aJ){if(aJ.hasOwnProperty(aD)){aG=aJ[aD];for(aF=0,aH=aG.length;aF<aH;aF++){aI=aG[aF];aI[4]&&aI[4].cancel();if(aI[0].tasks&&(aE=aI[0].tasks.length)){while(aE--){aI[0].tasks[aE].cancel()}delete aI.tasks}A=aI[1];ah.un(aC,aD,ah.extAdapter?aI[3]:A);if(A&&aC.addEventListener&&aD=="mousewheel"){aC.removeEventListener("DOMMouseScroll",A,false)}if(A&&Ext.isDocument(aC)&&aD=="mousedown"){Ext.EventManager.stoppedMouseDownEvent.removeListener(A)}}}}aK[E]&&(aK[E].events={})},getListeners:function(aC,E){aC=Ext.getDom(aC);if(!aC){return}var aE=(Ext.get(aC)||{}).id,A=Q(aC),aD=(A[aE]||{}).events||{};return aD[E]||null},purgeElement:function(aC,A,aE){aC=Ext.getDom(aC);var E=aC.id,aH=Q(aC),aI=(aH[E]||{}).events||{},aD,aG,aF;if(aE){if(aI.hasOwnProperty(aE)){aG=aI[aE];for(aD=0,aF=aG.length;aD<aF;aD++){m.removeListener(aC,aE,aG[aD][0])}}}else{m.removeAll(aC)}if(A&&aC&&aC.childNodes){for(aD=0,aF=aC.childNodes.length;aD<aF;aD++){m.purgeElement(aC.childNodes[aD],A,aE)}}}});ah.getListeners=function(E,A){return Ext.EventManager.getListeners(E,A)};Ext.provide&&Ext.provide("multidom")})();(function(){var El=Ext.Element,ElFrame,ELD=Ext.lib.Dom,EMPTYFN=function(){},OP=Object.prototype,addListener=function(){var handler;if(window.addEventListener){handler=function F(el,eventName,fn,capture){el.addEventListener(eventName,fn,!!capture)}}else{if(window.attachEvent){handler=function F(el,eventName,fn,capture){el.attachEvent("on"+eventName,fn)}}else{handler=function F(){}}}var F=null;return handler}(),removeListener=function(){var handler;if(window.removeEventListener){handler=function F(el,eventName,fn,capture){el.removeEventListener(eventName,fn,(capture))}}else{if(window.detachEvent){handler=function F(el,eventName,fn){el.detachEvent("on"+eventName,fn)}}else{handler=function F(){}}}var F=null;return handler}();if(typeof ELD.getDocument!="function"){alert("MIF 2.1.1 requires multidom support")}if(!Ext.elCache||parseInt(Ext.version.replace(/\./g,""),10)<311){alert("Ext Release "+Ext.version+" is not supported")}Ext.ns("Ext.ux.ManagedIFrame","Ext.ux.plugin");var MIM,MIF=Ext.ux.ManagedIFrame,MIFC;var frameEvents=["documentloaded","domready","focus","blur","resize","scroll","unload","scroll","exception","message","reset"];var reSynthEvents=new RegExp("^("+frameEvents.join("|")+")","i");Ext.ux.ManagedIFrame.Element=Ext.extend(Ext.Element,{constructor:function(element,forceNew,doc){var d=doc||document,elCache=ELD.resolveDocumentCache(d),dom=Ext.getDom(element,false,d);if(!dom||!(/^(iframe|frame)/i).test(dom.tagName)){return null}var id=Ext.id(dom);this.dom=dom;this.id=id;(elCache[id]||(elCache[id]={el:this,events:{},data:{}})).el=this;this.dom.name||(this.dom.name=this.id);if(Ext.isIE){document.frames&&(document.frames[this.dom.name]||(document.frames[this.dom.name]=this.dom))}this.dom.ownerCt=this;MIM.register(this);if(!this._observable){(this._observable=new Ext.util.Observable()).addEvents("documentloaded","domready","exception","resize","message","blur","focus","unload","scroll","reset");this._observable.addEvents("_docready","_docload")}var H=Ext.isIE?"onreadystatechange":"onload";this.dom[H]=this.loadHandler.createDelegate(this);this.dom.onerror=this.loadHandler.createDelegate(this)},destructor:function(){this.dom[Ext.isIE?"onreadystatechange":"onload"]=this.dom.onerror=EMPTYFN;MIM.deRegister(this);this.removeAllListeners();Ext.destroy(this.frameShim,this.DDM);this.hideMask(true);delete this.loadMask;this.reset();this.manager=null;this.dom.ownerCt=null},cleanse:function(forceReclean,deep){if(this.isCleansed&&forceReclean!==true){return this}var d=this.dom,n=d.firstChild,nx;while(d&&n){nx=n.nextSibling;deep&&Ext.fly(n).cleanse(forceReclean,deep);Ext.removeNode(n);n=nx}this.isCleansed=true;return this},src:null,CSS:null,manager:null,disableMessaging:true,domReadyRetries:7500,focusOnLoad:Ext.isIE,eventsFollowFrameLinks:true,remove:function(){this.destructor.apply(this,arguments);ElFrame.superclass.remove.apply(this,arguments)},getDocument:function(){return this.dom?this.dom.ownerDocument:document},submitAsTarget:function(submitCfg){var opt=submitCfg||{},D=this.getDocument(),form=Ext.getDom(opt.form?opt.form.form||opt.form:null,false,D)||Ext.DomHelper.append(D.body,{tag:"form",cls:"x-hidden x-mif-form",encoding:"multipart/form-data"}),formFly=Ext.fly(form,"_dynaForm"),formState={target:form.target||"",method:form.method||"",encoding:form.encoding||"",enctype:form.enctype||"",action:form.action||""},encoding=opt.encoding||form.encoding,method=opt.method||form.method||"POST";formFly.set({target:this.dom.name,method:method,encoding:encoding,action:opt.url||opt.action||form.action});if(method=="POST"||!!opt.enctype){formFly.set({enctype:opt.enctype||form.enctype||encoding})}var hiddens,hd,ps;if(opt.params&&(ps=Ext.isFunction(opt.params)?opt.params():opt.params)){hiddens=[];Ext.iterate(ps=typeof ps=="string"?Ext.urlDecode(ps,false):ps,function(n,v){Ext.fly(hd=D.createElement("input")).set({type:"hidden",name:n,value:v});form.appendChild(hd);hiddens.push(hd)})}opt.callback&&this._observable.addListener("_docready",opt.callback,opt.scope,{single:true});this._frameAction=true;this._targetURI=location.href;this.showMask();(function(){form.submit();hiddens&&Ext.each(hiddens,Ext.removeNode,Ext);if(formFly.hasClass("x-mif-form")){formFly.remove()}else{formFly.set(formState)}delete El._flyweights._dynaForm;formFly=null;this.hideMask(true)}).defer(100,this);return this},resetUrl:(function(){return Ext.isIE&&Ext.isSecure?Ext.SSL_SECURE_URL:"about:blank"})(),setSrc:function(url,discardUrl,callback,scope){var src=url||this.src||this.resetUrl;var O=this._observable;this._unHook();Ext.isFunction(callback)&&O.addListener("_docload",callback,scope||this,{single:true});this.showMask();(discardUrl!==true)&&(this.src=src);var s=this._targetURI=(Ext.isFunction(src)?src()||"":src);try{this._frameAction=true;this.dom.src=s;this.checkDOM()}catch(ex){O.fireEvent.call(O,"exception",this,ex)}return this},setLocation:function(url,discardUrl,callback,scope){var src=url||this.src||this.resetUrl;var O=this._observable;this._unHook();Ext.isFunction(callback)&&O.addListener("_docload",callback,scope||this,{single:true});this.showMask();var s=this._targetURI=(Ext.isFunction(src)?src()||"":src);if(discardUrl!==true){this.src=src}try{this._frameAction=true;this.getWindow().location.replace(s);this.checkDOM()}catch(ex){O.fireEvent.call(O,"exception",this,ex)}return this},reset:function(src,callback,scope){this._unHook();var loadMaskOff=false,s=src,win=this.getWindow(),O=this._observable;if(this.loadMask){loadMaskOff=this.loadMask.disabled;this.loadMask.disabled=false}this.hideMask(true);if(win){this.isReset=true;var cb=callback;O.addListener("_docload",function(frame){if(this.loadMask){this.loadMask.disabled=loadMaskOff}Ext.isFunction(cb)&&(cb=cb.apply(scope||this,arguments));O.fireEvent("reset",this)},this,{single:true});Ext.isFunction(s)&&(s=src());s=this._targetURI=Ext.isEmpty(s,true)?this.resetUrl:s;win.location?(win.location.href=s):O.fireEvent("_docload",this)}return this},scriptRE:/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/gi,update:function(content,loadScripts,callback,scope){loadScripts=loadScripts||this.getUpdater().loadScripts||false;content=Ext.DomHelper.markup(content||"");content=loadScripts===true?content:content.replace(this.scriptRE,"");var doc;if((doc=this.getFrameDocument())&&!!content.length){this._unHook();this.src=null;this.showMask();Ext.isFunction(callback)&&this._observable.addListener("_docload",callback,scope||this,{single:true});this._targetURI=location.href;doc.open();this._frameAction=true;doc.write(content);doc.close();this.checkDOM()}else{this.hideMask(true);Ext.isFunction(callback)&&callback.call(scope,this)}return this},execCommand:function(command,userInterface,value,validate){var doc,assert;if((doc=this.getFrameDocument())&&!!command){try{Ext.isIE&&this.getWindow().focus();assert=validate&&Ext.isFunction(doc.queryCommandEnabled)?doc.queryCommandEnabled(command):true;return assert&&doc.execCommand(command,!!userInterface,value)}catch(eex){return false}}return false},setDesignMode:function(active){var doc;(doc=this.getFrameDocument())&&(doc.designMode=(/on|true/i).test(String(active))?"on":"off")},getUpdater:function(){return this.updateManager||(this.updateManager=new MIF.Updater(this))},getHistory:function(){var h=null;try{h=this.getWindow().history}catch(eh){}return h},get:function(el){var doc=this.getFrameDocument();return doc?Ext.get(el,doc):doc=null},fly:function(el,named){var doc=this.getFrameDocument();return doc?Ext.fly(el,named,doc):null},getDom:function(el){var d;if(!el||!(d=this.getFrameDocument())){return(d=null)}return Ext.getDom(el,d)},select:function(selector,unique){var d;return(d=this.getFrameDocument())?Ext.Element.select(selector,unique,d):d=null},query:function(selector){var d;return(d=this.getFrameDocument())?Ext.DomQuery.select(selector,d):null},removeNode:Ext.removeNode,_renderHook:function(){this._windowContext=null;this.CSS=this.CSS?this.CSS.destroy():null;this._hooked=false;try{if(this.writeScript('(function(){(window.hostMIF = parent.document.getElementById("'+this.id+'").ownerCt)._windowContext='+(Ext.isIE?"window":'{eval:function(s){return new Function("return ("+s+")")();}}')+";})()")){var w,p=this._frameProxy,D=this.getFrameDocument();if(w=this.getWindow()){p||(p=this._frameProxy=this._eventProxy.createDelegate(this));addListener(w,"focus",p);addListener(w,"blur",p);addListener(w,"resize",p);addListener(w,"unload",p);D&&addListener(Ext.isIE?w:D,"scroll",p)}D&&(this.CSS=new Ext.ux.ManagedIFrame.CSS(D))}}catch(ex){}return this.domWritable()},_unHook:function(){if(this._hooked){this._windowContext&&(this._windowContext.hostMIF=null);this._windowContext=null;var w,p=this._frameProxy;if(p&&this.domWritable()&&(w=this.getWindow())){removeListener(w,"focus",p);removeListener(w,"blur",p);removeListener(w,"resize",p);removeListener(w,"unload",p);removeListener(Ext.isIE?w:this.getFrameDocument(),"scroll",p)}}ELD.clearDocumentCache&&ELD.clearDocumentCache(this.id);this.CSS=this.CSS?this.CSS.destroy():null;this.domFired=this._frameAction=this.domReady=this._hooked=false},_windowContext:null,getFrameDocument:function(){var win=this.getWindow(),doc=null;try{doc=(Ext.isIE&&win?win.document:null)||this.dom.contentDocument||window.frames[this.dom.name].document||null}catch(gdEx){ELD.clearDocumentCache&&ELD.clearDocumentCache(this.id);return false}doc=(doc&&Ext.isFunction(ELD.getDocument))?ELD.getDocument(doc,true):doc;return doc},getDoc:function(){var D=this.getFrameDocument();return Ext.get(D,D)},getBody:function(){var d;return(d=this.getFrameDocument())?this.get(d.body||d.documentElement):null},getDocumentURI:function(){var URI,d;try{URI=this.src&&(d=this.getFrameDocument())?d.location.href:null}catch(ex){}return URI||(Ext.isFunction(this.src)?this.src():this.src)},getWindowURI:function(){var URI,w;try{URI=(w=this.getWindow())?w.location.href:null}catch(ex){}return URI||(Ext.isFunction(this.src)?this.src():this.src)},getWindow:function(){var dom=this.dom,win=null;try{win=dom.contentWindow||window.frames[dom.name]||null}catch(gwEx){}return win},scrollChildIntoView:function(child,container,hscroll){this.fly(child,"_scrollChildIntoView").scrollIntoView(this.getDom(container)||this.getBody().dom,hscroll);return this},print:function(){try{var win;if(win=this.getWindow()){Ext.isIE&&win.focus();win.print()}}catch(ex){throw new MIF.Error("printexception",ex.description||ex.message||ex)}return this},domWritable:function(){return !!Ext.isDocument(this.getFrameDocument(),true)&&!!this._windowContext},execScript:function(block,useDOM){try{if(this.domWritable()){if(useDOM){this.writeScript(block)}else{return this._windowContext.eval(block)}}else{throw new MIF.Error("execscript-secure-context")}}catch(ex){this._observable.fireEvent.call(this._observable,"exception",this,ex);return false}return true},writeScript:function(block,attributes){attributes=Ext.apply({},attributes||{},{type:"text/javascript",text:block});try{var head,script,doc=this.getFrameDocument();if(doc&&typeof doc.getElementsByTagName!="undefined"){if(!(head=doc.getElementsByTagName("head")[0])){head=doc.createElement("head");doc.getElementsByTagName("html")[0].appendChild(head)}if(head&&(script=doc.createElement("script"))){for(var attrib in attributes){if(attributes.hasOwnProperty(attrib)&&attrib in script){script[attrib]=attributes[attrib]}}return !!head.appendChild(script)}}}catch(ex){this._observable.fireEvent.call(this._observable,"exception",this,ex)}finally{script=head=null}return false},loadFunction:function(fn,useDOM,invokeIt){var name=fn.name||fn;var fnSrc=fn.fn||window[fn];name&&fnSrc&&this.execScript(name+"="+fnSrc,useDOM);invokeIt&&this.execScript(name+"()")},loadHandler:function(e,target){var rstatus=(this.dom||{}).readyState||(e||{}).type;if(this.eventsFollowFrameLinks||this._frameAction||this.isReset){switch(rstatus){case"domready":case"DOMFrameContentLoaded":case"domfail":this._onDocReady(rstatus);break;case"load":case"complete":this._onDocLoaded(rstatus);break;case"error":this._observable.fireEvent.apply(this._observable,["exception",this].concat(arguments));break;default:}this.frameState=rstatus}},_onDocReady:function(eventName){var w,obv=this._observable,D;if(!this.isReset&&this.focusOnLoad&&(w=this.getWindow())){w.focus()}obv.fireEvent("_docready",this);(D=this.getDoc())&&(D.isReady=true);if(!this.domFired&&(this._hooked=this._renderHook())){this.domFired=true;this.isReset||obv.fireEvent.call(obv,"domready",this)}this.domReady=true;this.hideMask()},_onDocLoaded:function(eventName){var obv=this._observable,w;this.domReady||this._onDocReady("domready");obv.fireEvent("_docload",this);this.isReset||obv.fireEvent("documentloaded",this);this.hideMask(true);this._frameAction=this.isReset=false},checkDOM:function(win){if(Ext.isGecko){return}var n=0,frame=this,domReady=false,b,l,d,max=this.domReadyRetries||2500,polling=false,startLocation=(this.getFrameDocument()||{location:{}}).location.href;(function(){d=frame.getFrameDocument()||{location:{}};polling=(d.location.href!==startLocation||d.location.href===frame._targetURI);if(frame.domReady){return}domReady=polling&&((b=frame.getBody())&&!!(b.dom.innerHTML||"").length)||false;if(d.location.href&&!domReady&&(++n<max)){setTimeout(arguments.callee,2);return}frame.loadHandler({type:domReady?"domready":"domfail"})})()},filterEventOptionsRe:/^(?:scope|delay|buffer|single|stopEvent|preventDefault|stopPropagation|normalized|args|delegate)$/,addListener:function(eventName,fn,scope,options){if(typeof eventName=="object"){var o=eventName;for(var e in o){if(this.filterEventOptionsRe.test(e)){continue}if(typeof o[e]=="function"){this.addListener(e,o[e],o.scope,o)}else{this.addListener(e,o[e].fn,o[e].scope,o[e])}}return}if(reSynthEvents.test(eventName)){var O=this._observable;if(O){O.events[eventName]||(O.addEvents(eventName));O.addListener.call(O,eventName,fn,scope||this,options)}}else{ElFrame.superclass.addListener.call(this,eventName,fn,scope||this,options)}return this},removeListener:function(eventName,fn,scope){var O=this._observable;if(reSynthEvents.test(eventName)){O&&O.removeListener.call(O,eventName,fn,scope||this,options)}else{ElFrame.superclass.removeListener.call(this,eventName,fn,scope||this)}return this},removeAllListeners:function(){Ext.EventManager.removeAll(this.dom);var O=this._observable;O&&O.purgeListeners.call(this._observable);return this},showMask:function(msg,msgCls,maskCls){var lmask=this.loadMask;if(lmask&&!lmask.disabled){this.mask(msg||lmask.msg,msgCls||lmask.msgCls,maskCls||lmask.maskCls,lmask.maskEl)}},hideMask:function(forced){var tlm=this.loadMask||{};if(forced||(tlm.hideOnReady&&this.domReady)){this.unmask()}},mask:function(msg,msgCls,maskCls,maskEl){this._mask&&this.unmask();var p=Ext.get(maskEl)||this.parent(".ux-mif-mask-target")||this.parent();if(p.getStyle("position")=="static"&&!p.select("iframe,frame,object,embed").elements.length){p.addClass("x-masked-relative")}p.addClass("x-masked");this._mask=Ext.DomHelper.append(p,{cls:maskCls||"ux-mif-el-mask"},true);this._mask.setDisplayed(true);this._mask._agent=p;if(typeof msg=="string"){this._maskMsg=Ext.DomHelper.append(p,{cls:msgCls||"ux-mif-el-mask-msg",style:{visibility:"hidden"},cn:{tag:"div",html:msg}},true);this._maskMsg.setVisibilityMode(Ext.Element.VISIBILITY).center(p).setVisible(true)}if(Ext.isIE&&!(Ext.isIE7&&Ext.isStrict)&&this.getStyle("height")=="auto"){this._mask.setSize(undefined,this._mask.getHeight())}return this._mask},unmask:function(){var a;if(this._mask){(a=this._mask._agent)&&a.removeClass(["x-masked-relative","x-masked"]);if(this._maskMsg){this._maskMsg.remove();delete this._maskMsg}this._mask.remove();delete this._mask}},createFrameShim:function(imgUrl,shimCls){this.shimCls=shimCls||this.shimCls||"ux-mif-shim";this.frameShim||(this.frameShim=this.next("."+this.shimCls)||Ext.DomHelper.append(this.dom.parentNode,{tag:"img",src:imgUrl||Ext.BLANK_IMAGE_URL,cls:this.shimCls,galleryimg:"no"},true));this.frameShim&&(this.frameShim.autoBoxAdjust=false);return this.frameShim},toggleShim:function(show){var shim=this.frameShim||this.createFrameShim();var cls=this.shimCls+"-on";!show&&shim.removeClass(cls);show&&!shim.hasClass(cls)&&shim.addClass(cls)},load:function(loadCfg){var um;if(um=this.getUpdater()){if(loadCfg&&loadCfg.renderer){um.setRenderer(loadCfg.renderer);delete loadCfg.renderer}um.update.apply(um,arguments)}return this},_eventProxy:function(e){if(!e){return}e=Ext.EventObject.setEvent(e);var be=e.browserEvent||e,er,args=[e.type,this];if(!be.eventPhase||(be.eventPhase==(be.AT_TARGET||2))){if(e.type=="resize"){var doc=this.getFrameDocument();doc&&(args.push({height:ELD.getDocumentHeight(doc),width:ELD.getDocumentWidth(doc)},{height:ELD.getViewportHeight(doc),width:ELD.getViewportWidth(doc)},{height:ELD.getViewHeight(false,doc),width:ELD.getViewWidth(false,doc)}))}er=this._observable?this._observable.fireEvent.apply(this._observable,args.concat(Array.prototype.slice.call(arguments,0))):null;(e.type=="unload")&&this._unHook()}return er},sendMessage:function(message,tag,origin){},postMessage:function(message,ports,origin){}});ElFrame=Ext.Element.IFRAME=Ext.Element.FRAME=Ext.ux.ManagedIFrame.Element;var fp=ElFrame.prototype;Ext.override(ElFrame,{on:fp.addListener,un:fp.removeListener,getUpdateManager:fp.getUpdater});Ext.ux.ManagedIFrame.ComponentAdapter=function(){};Ext.ux.ManagedIFrame.ComponentAdapter.prototype={version:2.12,defaultSrc:null,unsupportedText:"Inline frames are NOT enabled/supported by your browser.",hideMode:!Ext.isIE&&!!Ext.ux.plugin.VisibilityMode?"nosize":"display",animCollapse:Ext.isIE,animFloat:Ext.isIE,frameConfig:null,focusOnLoad:false,frameEl:null,useShim:false,autoScroll:true,autoLoad:null,getId:function(){return this.id||(this.id="mif-comp-"+(++Ext.Component.AUTO_ID))},stateEvents:["documentloaded"],stateful:false,setAutoScroll:function(auto){var scroll=Ext.value(auto,this.autoScroll===true);this.rendered&&this.getFrame()&&this.frameEl.setOverflow((this.autoScroll=scroll)?"auto":"hidden");return this},getContentTarget:function(){return this.getFrame()},getFrame:function(){if(this.rendered){if(this.frameEl){return this.frameEl}var f=this.items&&this.items.first?this.items.first():null;f&&(this.frameEl=f.frameEl);return this.frameEl}return null},getFrameWindow:function(){return this.getFrame()?this.frameEl.getWindow():null},getFrameDocument:function(){return this.getFrame()?this.frameEl.getFrameDocument():null},getFrameDoc:function(){return this.getFrame()?this.frameEl.getDoc():null},getFrameBody:function(){return this.getFrame()?this.frameEl.getBody():null},resetFrame:function(){this.getFrame()&&this.frameEl.reset.apply(this.frameEl,arguments);return this},submitAsTarget:function(submitCfg){this.getFrame()&&this.frameEl.submitAsTarget.apply(this.frameEl,arguments);return this},load:function(loadCfg){if(loadCfg&&this.getFrame()){var args=arguments;this.resetFrame(null,function(){loadCfg.submitAsTarget?this.submitAsTarget.apply(this,args):this.frameEl.load.apply(this.frameEl,args)},this)}this.autoLoad=loadCfg;return this},doAutoLoad:function(){this.autoLoad&&this.load(typeof this.autoLoad=="object"?this.autoLoad:{url:this.autoLoad})},getUpdater:function(){return this.getFrame()?this.frameEl.getUpdater():null},setSrc:function(url,discardUrl,callback,scope){this.getFrame()&&this.frameEl.setSrc.apply(this.frameEl,arguments);return this},setLocation:function(url,discardUrl,callback,scope){this.getFrame()&&this.frameEl.setLocation.apply(this.frameEl,arguments);return this},getState:function(){var URI=this.getFrame()?this.frameEl.getDocumentURI()||null:null;var state=this.supr().getState.call(this);state=Ext.apply(state||{},{defaultSrc:Ext.isFunction(URI)?URI():URI,autoLoad:this.autoLoad});return state},setMIFEvents:function(){this.addEvents("documentloaded","domready","exception","message","blur","focus","scroll","resize","unload","reset")},sendMessage:function(message,tag,origin){},onAdd:function(C){C.relayTarget&&this.suspendEvents(true)},initRef:function(){if(this.ref){var t=this,levels=this.ref.split("/"),l=levels.length,i;for(i=0;i<l;i++){if(t.ownerCt){t=t.ownerCt}}this.refName=levels[--i];t[this.refName]||(t[this.refName]=this);this.refOwner=t}}};Ext.ux.ManagedIFrame.Component=Ext.extend(Ext.BoxComponent,{ctype:"Ext.ux.ManagedIFrame.Component",initComponent:function(){var C={monitorResize:this.monitorResize||(this.monitorResize=!!this.fitToParent),plugins:(this.plugins||[]).concat(this.hideMode==="nosize"&&Ext.ux.plugin.VisibilityMode?[new Ext.ux.plugin.VisibilityMode({hideMode:"nosize",elements:["bwrap"]})]:[])};MIF.Component.superclass.initComponent.call(Ext.apply(this,Ext.apply(this.initialConfig,C)));this.setMIFEvents()},onRender:function(ct,position){var frCfg=this.frameCfg||this.frameConfig||(this.relayTarget?{name:this.relayTarget.id}:{})||{};var frDOM=frCfg.autoCreate||frCfg;frDOM=Ext.apply({tag:"iframe",id:Ext.id()},frDOM);var el=Ext.getDom(this.el);(el&&el.tagName=="iframe")||(this.autoEl=Ext.apply({name:frDOM.id,frameborder:0},frDOM));MIF.Component.superclass.onRender.apply(this,arguments);if(this.unsupportedText){ct.child("noframes")||ct.createChild({tag:"noframes",html:this.unsupportedText||null})}var frame=this.el;var F;if(F=this.frameEl=(this.el?new MIF.Element(this.el.dom,true):null)){(F.ownerCt=(this.relayTarget||this)).frameEl=F;F.addClass("ux-mif");if(this.loadMask){var mEl=this.loadMask.maskEl;F.loadMask=Ext.apply({disabled:false,hideOnReady:false,msgCls:"ext-el-mask-msg x-mask-loading",maskCls:"ext-el-mask"},{maskEl:F.ownerCt[String(mEl)]||F.parent("."+String(mEl))||F.parent(".ux-mif-mask-target")||mEl},Ext.isString(this.loadMask)?{msg:this.loadMask}:this.loadMask);Ext.get(F.loadMask.maskEl)&&Ext.get(F.loadMask.maskEl).addClass("ux-mif-mask-target")}Ext.apply(F,{disableMessaging:Ext.value(this.disableMessaging,true),focusOnLoad:Ext.value(this.focusOnLoad,Ext.isIE)});F._observable&&(this.relayTarget||this).relayEvents(F._observable,frameEvents.concat(this._msgTagHandlers||[]));delete this.contentEl}},afterRender:function(container){MIF.Component.superclass.afterRender.apply(this,arguments);if(this.fitToParent&&!this.ownerCt){var pos=this.getPosition(),size=(Ext.get(this.fitToParent)||this.getEl().parent()).getViewSize();this.setSize(size.width-pos[0],size.height-pos[1])}this.getEl().setOverflow("hidden");this.setAutoScroll();var F;if(F=this.frameEl){var ownerCt=this.ownerCt;while(ownerCt){ownerCt.on("afterlayout",function(container,layout){Ext.each(["north","south","east","west"],function(region){var reg;if((reg=layout[region])&&reg.split&&reg.split.dd&&!reg._splitTrapped){reg.split.dd.endDrag=reg.split.dd.endDrag.createSequence(MIM.hideShims,MIM);reg.split.on("beforeresize",MIM.showShims,MIM);reg._splitTrapped=MIM._splitTrapped=true}},this)},this,{single:true});ownerCt=ownerCt.ownerCt}if(!!this.ownerCt||this.useShim){this.frameShim=F.createFrameShim()}this.getUpdater().showLoadIndicator=this.showLoadIndicator||false;var resumeEvents=this.relayTarget&&this.ownerCt?this.ownerCt.resumeEvents.createDelegate(this.ownerCt):null;if(this.autoload){this.doAutoLoad()}else{if(this.frameMarkup||this.html){F.update(this.frameMarkup||this.html,true,resumeEvents);delete this.html;delete this.frameMarkup;return}else{if(this.defaultSrc){F.setSrc(this.defaultSrc,false)}else{F.reset(null,resumeEvents);return}}}resumeEvents&&resumeEvents()}},beforeDestroy:function(){var F;if(F=this.getFrame()){F.remove();this.frameEl=this.frameShim=null}this.relayTarget&&(this.relayTarget.frameEl=null);MIF.Component.superclass.beforeDestroy.call(this)}});Ext.override(MIF.Component,MIF.ComponentAdapter.prototype);Ext.reg("mif",MIF.Component);function embed_MIF(config){config||(config={});config.layout="fit";config.items={xtype:"mif",ref:"mifChild",useShim:true,autoScroll:Ext.value(config.autoScroll,this.autoScroll),defaultSrc:Ext.value(config.defaultSrc,this.defaultSrc),frameMarkup:Ext.value(config.html,this.html),loadMask:Ext.value(config.loadMask,this.loadMask),disableMessaging:Ext.value(config.disableMessaging,this.disableMessaging),focusOnLoad:Ext.value(config.focusOnLoad,this.focusOnLoad),frameConfig:Ext.value(config.frameConfig||config.frameCfg,this.frameConfig),relayTarget:this};delete config.html;this.setMIFEvents();return config}Ext.ux.ManagedIFrame.Panel=Ext.extend(Ext.Panel,{ctype:"Ext.ux.ManagedIFrame.Panel",bodyCssClass:"ux-mif-mask-target",constructor:function(config){MIF.Panel.superclass.constructor.call(this,embed_MIF.call(this,config))}});Ext.override(MIF.Panel,MIF.ComponentAdapter.prototype);Ext.reg("iframepanel",MIF.Panel);Ext.ux.ManagedIFrame.Portlet=Ext.extend(Ext.ux.ManagedIFrame.Panel,{ctype:"Ext.ux.ManagedIFrame.Portlet",anchor:"100%",frame:true,collapseEl:"bwrap",collapsible:true,draggable:true,cls:"x-portlet"});Ext.reg("iframeportlet",MIF.Portlet);Ext.ux.ManagedIFrame.Window=Ext.extend(Ext.Window,{ctype:"Ext.ux.ManagedIFrame.Window",bodyCssClass:"ux-mif-mask-target",constructor:function(config){MIF.Window.superclass.constructor.call(this,embed_MIF.call(this,config))}});Ext.override(MIF.Window,MIF.ComponentAdapter.prototype);Ext.reg("iframewindow",MIF.Window);Ext.ux.ManagedIFrame.Updater=Ext.extend(Ext.Updater,{showLoading:function(){this.showLoadIndicator&&this.el&&this.el.mask(this.indicatorText)},hideLoading:function(){this.showLoadIndicator&&this.el&&this.el.unmask()},updateComplete:function(response){MIF.Updater.superclass.updateComplete.apply(this,arguments);this.hideLoading()},processFailure:function(response){MIF.Updater.superclass.processFailure.apply(this,arguments);this.hideLoading()}});var styleCamelRe=/(-[a-z])/gi;var styleCamelFn=function(m,a){return a.charAt(1).toUpperCase()};Ext.ux.ManagedIFrame.CSS=function(hostDocument){var doc;if(hostDocument){doc=hostDocument;return{rules:null,destroy:function(){return doc=null},createStyleSheet:function(cssText,id){var ss;if(!doc){return}var head=doc.getElementsByTagName("head")[0];var rules=doc.createElement("style");rules.setAttribute("type","text/css");Ext.isString(id)&&rules.setAttribute("id",id);if(Ext.isIE){head.appendChild(rules);ss=rules.styleSheet;ss.cssText=cssText}else{try{rules.appendChild(doc.createTextNode(cssText))}catch(e){rules.cssText=cssText}head.appendChild(rules);ss=rules.styleSheet?rules.styleSheet:(rules.sheet||doc.styleSheets[doc.styleSheets.length-1])}this.cacheStyleSheet(ss);return ss},removeStyleSheet:function(id){if(!doc||!id){return}var existing=doc.getElementById(id);if(existing){existing.parentNode.removeChild(existing)}},swapStyleSheet:function(id,url){if(!doc){return}this.removeStyleSheet(id);var ss=doc.createElement("link");ss.setAttribute("rel","stylesheet");ss.setAttribute("type","text/css");Ext.isString(id)&&ss.setAttribute("id",id);ss.setAttribute("href",url);doc.getElementsByTagName("head")[0].appendChild(ss)},refreshCache:function(){return this.getRules(true)},cacheStyleSheet:function(ss,media){this.rules||(this.rules={});try{Ext.each(ss.cssRules||ss.rules||[],function(rule){this.hashRule(rule,ss,media)},this);Ext.each(ss.imports||[],function(sheet){sheet&&this.cacheStyleSheet(sheet,this.resolveMedia([sheet,sheet.parentStyleSheet]))},this)}catch(e){}},hashRule:function(rule,sheet,mediaOverride){var mediaSelector=mediaOverride||this.resolveMedia(rule);if(rule.cssRules||rule.rules){this.cacheStyleSheet(rule,this.resolveMedia([rule,rule.parentRule]))}if(rule.styleSheet){this.cacheStyleSheet(rule.styleSheet,this.resolveMedia([rule,rule.ownerRule,rule.parentStyleSheet]))}rule.selectorText&&Ext.each((mediaSelector||"").split(","),function(media){this.rules[((media?media.trim()+":":"")+rule.selectorText).toLowerCase()]=rule},this)},resolveMedia:function(rule){var media;Ext.each([].concat(rule),function(r){if(r&&r.media&&r.media.length){media=r.media;return false}});return media?(Ext.isIE?String(media):media.mediaText):""},getRules:function(refreshCache){if(!this.rules||refreshCache){this.rules={};if(doc){var ds=doc.styleSheets;for(var i=0,len=ds.length;i<len;i++){try{this.cacheStyleSheet(ds[i])}catch(e){}}}}return this.rules},getRule:function(selector,refreshCache,mediaSelector){var rs=this.getRules(refreshCache);if(Ext.type(mediaSelector)=="string"){mediaSelector=mediaSelector.trim()+":"}else{mediaSelector=""}if(!Ext.isArray(selector)){return rs[(mediaSelector+selector).toLowerCase()]}var select;for(var i=0;i<selector.length;i++){select=(mediaSelector+selector[i]).toLowerCase();if(rs[select]){return rs[select]}}return null},updateRule:function(selector,property,value,mediaSelector){Ext.each((mediaSelector||"").split(","),function(mediaSelect){if(!Ext.isArray(selector)){var rule=this.getRule(selector,false,mediaSelect);if(rule){rule.style[property.replace(camelRe,camelFn)]=value;return true}}else{for(var i=0;i<selector.length;i++){if(this.updateRule(selector[i],property,value,mediaSelect)){return true}}}return false},this)}}}};Ext.ux.ManagedIFrame.Manager=function(){var frames={};var implementation={_DOMFrameReadyHandler:function(e){try{var $frame;if($frame=e.target.ownerCt){$frame.loadHandler.call($frame,e)}}catch(rhEx){}},shimCls:"ux-mif-shim",register:function(frame){frame.manager=this;frames[frame.id]=frames[frame.name]={ref:frame};return frame},deRegister:function(frame){delete frames[frame.id];delete frames[frame.name]},hideShims:function(){var mm=MIF.Manager;mm.shimsApplied&&Ext.select("."+mm.shimCls,true).removeClass(mm.shimCls+"-on");mm.shimsApplied=false},showShims:function(){var mm=MIF.Manager;!mm.shimsApplied&&Ext.select("."+mm.shimCls,true).addClass(mm.shimCls+"-on");mm.shimsApplied=true},getFrameById:function(id){return typeof id=="string"?(frames[id]?frames[id].ref||null:null):null},getFrameByName:function(name){return this.getFrameById(name)},getFrameHash:function(frame){return frames[frame.id]||frames[frame.id]||null},destroy:function(){if(document.addEventListener&&!Ext.isOpera){window.removeEventListener("DOMFrameContentLoaded",this._DOMFrameReadyHandler,false)}}};document.addEventListener&&!Ext.isOpera&&window.addEventListener("DOMFrameContentLoaded",implementation._DOMFrameReadyHandler,false);Ext.EventManager.on(window,"beforeunload",implementation.destroy,implementation);return implementation}();MIM=MIF.Manager;MIM.showDragMask=MIM.showShims;MIM.hideDragMask=MIM.hideShims;var winDD=Ext.Window.DD;Ext.override(winDD,{startDrag:winDD.prototype.startDrag.createInterceptor(MIM.showShims),endDrag:winDD.prototype.endDrag.createInterceptor(MIM.hideShims)});Ext.ux.ManagedIFramePanel=MIF.Panel;Ext.ux.ManagedIFramePortlet=MIF.Portlet;Ext.ux.ManagedIframe=function(el,opt){var args=Array.prototype.slice.call(arguments,0),el=Ext.get(args[0]),config=args[0];if(el&&el.dom&&el.dom.tagName=="IFRAME"){config=args[1]||{}}else{config=args[0]||args[1]||{};el=config.autoCreate?Ext.get(Ext.DomHelper.append(config.autoCreate.parent||Ext.getBody(),Ext.apply({tag:"iframe",frameborder:0,cls:"x-mif",src:(Ext.isIE&&Ext.isSecure)?Ext.SSL_SECURE_URL:"about:blank"},config.autoCreate))):null;if(el&&config.unsupportedText){Ext.DomHelper.append(el.dom.parentNode,{tag:"noframes",html:config.unsupportedText})}}var mif=new MIF.Element(el,true);if(mif){Ext.apply(mif,{disableMessaging:Ext.value(config.disableMessaging,true),loadMask:!!config.loadMask?Ext.apply({msg:"Loading..",msgCls:"x-mask-loading",maskEl:null,hideOnReady:false,disabled:false},config.loadMask):false,_windowContext:null,eventsFollowFrameLinks:Ext.value(config.eventsFollowFrameLinks,true)});config.listeners&&mif.on(config.listeners);if(!!config.html){mif.update(config.html)}else{!!config.src&&mif.setSrc(config.src)}}return mif};Ext.ux.ManagedIFrame.Error=Ext.extend(Ext.Error,{constructor:function(message,arg){this.arg=arg;Ext.Error.call(this,message)},name:"Ext.ux.ManagedIFrame"});Ext.apply(Ext.ux.ManagedIFrame.Error.prototype,{lang:{"documentcontext-remove":"An attempt was made to remove an Element from the wrong document context.","execscript-secure-context":"An attempt was made at script execution within a document context with limited access permissions.",printexception:"An Error was encountered attempting the print the frame contents (document access is likely restricted)."}});Ext.onReady(function(){var CSS=new Ext.ux.ManagedIFrame.CSS(document),rules=[];CSS.getRule(".ux-mif-fill")||(rules.push(".ux-mif-fill{height:100%;width:100%;}"));CSS.getRule(".ux-mif-mask-target")||(rules.push(".ux-mif-mask-target{position:relative;zoom:1;}"));CSS.getRule(".ux-mif-el-mask")||(rules.push(".ux-mif-el-mask {z-index: 100;position: absolute;top:0;left:0;-moz-opacity: 0.5;opacity: .50;*filter: alpha(opacity=50);width: 100%;height: 100%;zoom: 1;} ",".ux-mif-el-mask-msg {z-index: 1;position: absolute;top: 0;left: 0;border:1px solid;background:repeat-x 0 -16px;padding:2px;} ",".ux-mif-el-mask-msg div {padding:5px 10px 5px 10px;border:1px solid;cursor:wait;} "));if(!CSS.getRule(".ux-mif-shim")){rules.push(".ux-mif-shim {z-index:8500;position:absolute;top:0px;left:0px;background:transparent!important;overflow:hidden;display:none;}");rules.push(".ux-mif-shim-on{width:100%;height:100%;display:block;zoom:1;}");rules.push(".ext-ie6 .ux-mif-shim{margin-left:5px;margin-top:3px;}")}!!rules.length&&CSS.createStyleSheet(rules.join(" "),"mifCSS")});Ext.provide&&Ext.provide("mif")})();


Ext.ux.NotificationMgr={positions:[]};Ext.ux.Notification=Ext.extend(Ext.Window,{initComponent:function(){Ext.applyIf(this,{iconCls:this.iconCls||'x-icon-information',width:250,height:100,autoHeight:true,closable:true,plain:false,draggable:false,bodyStyle:'text-align:left;padding:10px;',resizable:false});if(this.autoDestroy){this.task=new Ext.util.DelayedTask(this.close,this)}else{this.closable=true}Ext.ux.Notification.superclass.initComponent.call(this)},setMessage:function(a){this.body.update(a)},setTitle:function(a,b){Ext.ux.Notification.superclass.setTitle.call(this,a,b||this.iconCls)},onRender:function(a,b){Ext.ux.Notification.superclass.onRender.call(this,a,b)},onDestroy:function(){Ext.ux.NotificationMgr.positions.remove(this.pos);Ext.ux.Notification.superclass.onDestroy.call(this)},afterShow:function(){Ext.ux.Notification.superclass.afterShow.call(this);this.on('move',function(){Ext.ux.NotificationMgr.positions.remove(this.pos);if(this.autoDestroy){this.task.cancel()}},this);if(this.autoDestroy){this.task.delay(this.hideDelay||5000)}},animShow:function(){this.pos=0;while(Ext.ux.NotificationMgr.positions.indexOf(this.pos)>-1){this.pos++}Ext.ux.NotificationMgr.positions.push(this.pos);this.setSize(this.width,this.Height);this.el.alignTo(this.animateTarget||document,"br-tr",[-1,(screen.availHeight-135)-((this.getSize().height+10)*this.pos)]);this.el.slideIn('b',{duration:.7,callback:this.afterShow,scope:this})},animHide:function(){Ext.ux.NotificationMgr.positions.remove(this.pos);this.el.ghost("b",{duration:1,remove:true})}});
Ext.app.Module=function(a){Ext.apply(this,a);Ext.app.Module.superclass.constructor.call(this);this.init()};Ext.extend(Ext.app.Module,Ext.util.Observable,{launcher:null,loaded:true,menuPath:null,moduleType:null,moduleId:null,init:Ext.emptyFn,createWindow:Ext.emptyFn,handleRequest:Ext.emptyFn});
// for desk end

// for form
Ext.override(Ext.form.Field,{setFieldLableDisplayed:function(b){this.getEl().up('.x-form-item').setDisplayed(b)},setFieldLabel:function(text){Ext.fly(this.el.dom.parentNode.previousSibling).update(text);}});
Ext.ux.form.FileUploadField=Ext.extend(Ext.form.TextField,{buttonText:'Browse...',buttonOnly:false,buttonOffset:3,readOnly:true,autoSize:Ext.emptyFn,initComponent:function(){Ext.ux.form.FileUploadField.superclass.initComponent.call(this);this.addEvents('fileselected')},onRender:function(a,b){Ext.ux.form.FileUploadField.superclass.onRender.call(this,a,b);this.wrap=this.el.wrap({cls:'x-form-field-wrap x-form-file-wrap'});this.el.addClass('x-form-file-text');this.el.dom.removeAttribute('name');this.createFileInput();var c=Ext.applyIf(this.buttonCfg||{},{text:this.buttonText});this.button=new Ext.Button(Ext.apply(c,{renderTo:this.wrap,cls:'x-form-file-btn'+(c.iconCls?' x-btn-icon':'')}));if(this.buttonOnly){this.el.hide();this.wrap.setWidth(this.button.getEl().getWidth())}this.bindListeners();this.resizeEl=this.positionEl=this.wrap},bindListeners:function(){this.fileInput.on({scope:this,mouseenter:function(){this.button.addClass(['x-btn-over','x-btn-focus'])},mouseleave:function(){this.button.removeClass(['x-btn-over','x-btn-focus','x-btn-click'])},mousedown:function(){this.button.addClass('x-btn-click')},mouseup:function(){this.button.removeClass(['x-btn-over','x-btn-focus','x-btn-click'])},change:function(){var v=this.fileInput.dom.value;this.setValue(v);this.fireEvent('fileselected',this,v)}})},createFileInput:function(){this.fileInput=this.wrap.createChild({id:this.getFileInputId(),name:this.name||this.getId(),cls:'x-form-file',tag:'input',type:'file',size:1})},reset:function(){this.fileInput.remove();this.createFileInput();this.bindListeners();Ext.ux.form.FileUploadField.superclass.reset.call(this)},getFileInputId:function(){return this.id+'-file'},onResize:function(w,h){Ext.ux.form.FileUploadField.superclass.onResize.call(this,w,h);this.wrap.setWidth(w);if(!this.buttonOnly){var w=this.wrap.getWidth()-this.button.getEl().getWidth()-this.buttonOffset;this.el.setWidth(w)}},onDestroy:function(){Ext.ux.form.FileUploadField.superclass.onDestroy.call(this);Ext.destroy(this.fileInput,this.button,this.wrap)},onDisable:function(){Ext.ux.form.FileUploadField.superclass.onDisable.call(this);this.doDisable(true)},onEnable:function(){Ext.ux.form.FileUploadField.superclass.onEnable.call(this);this.doDisable(false)},doDisable:function(a){this.fileInput.dom.disabled=a;this.button.setDisabled(a)},preFocus:Ext.emptyFn,alignErrorIcon:function(){this.errorIcon.alignTo(this.wrap,'tl-tr',[2,0])}});Ext.reg('fileuploadfield',Ext.ux.form.FileUploadField);Ext.form.FileUploadField=Ext.ux.form.FileUploadField;
Ext.form.MiscField=function(_1){Ext.form.MiscField.superclass.constructor.call(this,_1);};Ext.extend(Ext.form.MiscField,Ext.BoxComponent,{defaultAutoCreate:{tag:"div"},fieldClass:"x-form-field",isFormField:true,value:undefined,disableReset:false,initComponent:function(){Ext.form.MiscField.superclass.initComponent.call(this);},getName:function(){return this.rendered&&this.el.dom.name?this.el.dom.name:(this.hiddenName||"");},onRender:function(ct,_3){Ext.form.MiscField.superclass.onRender.call(this,ct,_3);if(!this.el){var _4=this.getAutoCreate();if(!_4.name){_4.name=this.name||this.id;}this.el=ct.createChild(_4,_3);}this.el.addClass([this.fieldClass,this.cls]);this.initValue();},initValue:function(){if(this.value!==undefined){this.setRawValue(this.value);}else{if(this.el.dom.innerHTML.length>0){this.setRawValue(this.el.dom.innerHTML);}}},isDirty:function(){return String(this.getRawValue())!==String(this.originalValue);},afterRender:function(){Ext.form.MiscField.superclass.afterRender.call(this);this.initEvents();},reset:function(_5){if(!this.disableReset||_5===true){this.setRawValue(this.originalValue);}},initEvents:function(){this.originalValue=this.getRawValue();},isValid:function(){return true;},validate:function(){return true;},processValue:function(_6){return _6;},validateValue:function(_7){return true;},markInvalid:function(){return;},clearInvalid:function(){return;},getRawValue:function(){return this.el.dom.innerHTML;},getValue:function(){var f=Ext.util.Format;var v=f.trim(f.stripTags(this.getRawValue()));return v;},setRawValue:function(v){this.value=v;if(this.rendered){this.el.dom.innerHTML=v;}},setValue:function(v){var f=Ext.util.Format;this.setRawValue(f.trim(f.stripTags(v)));}});Ext.reg("miscfield",Ext.form.MiscField);
Ext.ux.form.SuperBoxSelect=function(a){Ext.ux.form.SuperBoxSelect.superclass.constructor.call(this,a);this.addEvents('beforeadditem','additem','newitem','beforeremoveitem','removeitem','clear')};Ext.ux.form.SuperBoxSelect=Ext.extend(Ext.ux.form.SuperBoxSelect,Ext.form.ComboBox,{allowAddNewData:false,backspaceDeletesLastItem:true,classField:null,clearBtnCls:'',displayFieldTpl:null,extraItemCls:'',extraItemStyle:'',expandBtnCls:'',fixFocusOnTabSelect:true,forceFormValue:true,itemDelimiterKey:Ext.EventObject.ENTER,navigateItemsWithTab:true,pinList:true,preventDuplicates:true,queryValuesDelimiter:'|',queryValuesIndicator:'valuesqry',removeValuesFromStore:true,renderFieldBtns:true,stackItems:false,styleField:null,supressClearValueRemoveEvents:false,validationEvent:'blur',valueDelimiter:',',initComponent:function(){Ext.apply(this,{items:new Ext.util.MixedCollection(false),usedRecords:new Ext.util.MixedCollection(false),addedRecords:[],remoteLookup:[],hideTrigger:true,grow:false,resizable:false,multiSelectMode:false,preRenderValue:null});if(this.transform){this.doTransform()}if(this.forceFormValue){this.items.on({add:this.manageNameAttribute,remove:this.manageNameAttribute,clear:this.manageNameAttribute,scope:this})}Ext.ux.form.SuperBoxSelect.superclass.initComponent.call(this);if(this.mode==='remote'&&this.store){this.store.on('load',this.onStoreLoad,this)}},onRender:function(a,b){var h=this.hiddenName;this.hiddenName=null;Ext.ux.form.SuperBoxSelect.superclass.onRender.call(this,a,b);this.hiddenName=h;this.manageNameAttribute();var c=(this.stackItems===true)?'x-superboxselect-stacked':'';if(this.renderFieldBtns){c+=' x-superboxselect-display-btns'}this.el.removeClass('x-form-text').addClass('x-superboxselect-input-field');this.wrapEl=this.el.wrap({tag:'ul'});this.outerWrapEl=this.wrapEl.wrap({tag:'div',cls:'x-form-text x-superboxselect '+c});this.inputEl=this.el.wrap({tag:'li',cls:'x-superboxselect-input'});if(this.renderFieldBtns){this.setupFieldButtons().manageClearBtn()}this.setupFormInterception()},onStoreLoad:function(b,c,d){var q=d.params[this.queryParam]||b.baseParams[this.queryParam]||"",isValuesQuery=d.params[this.queryValuesIndicator]||b.baseParams[this.queryValuesIndicator];if(this.removeValuesFromStore){this.store.each(function(a){if(this.usedRecords.containsKey(a.get(this.valueField))){this.store.remove(a)}},this)}if(isValuesQuery){var e=q.split(this.queryValuesDelimiter);Ext.each(e,function(p){this.remoteLookup.remove(p);var a=this.findRecord(this.valueField,p);if(a){this.addRecord(a)}},this);if(this.setOriginal){this.setOriginal=false;this.originalValue=this.getValue()}}if(q!==''&&this.allowAddNewData){Ext.each(this.remoteLookup,function(r){if(typeof r=="object"&&r[this.displayField]==q){this.remoteLookup.remove(r);if(c.length&&c[0].get(this.displayField)===q){this.addRecord(c[0]);return}var a=this.createRecord(r);this.store.add(a);this.addRecord(a);this.addedRecords.push(a);(function(){if(this.isExpanded()){this.collapse()}}).defer(10,this);return}},this)}var f=[];if(q===''){Ext.each(this.addedRecords,function(a){if(this.preventDuplicates&&this.usedRecords.containsKey(a.get(this.valueField))){return}f.push(a)},this)}else{var g=new RegExp(Ext.escapeRe(q)+'.*','i');Ext.each(this.addedRecords,function(a){if(this.preventDuplicates&&this.usedRecords.containsKey(a.get(this.valueField))){return}if(g.test(a.get(this.displayField))){f.push(a)}},this)}this.store.add(f);this.store.sort(this.displayField,'ASC');if(this.store.getCount()===0&&this.isExpanded()){this.collapse()}},doTransform:function(){var s=Ext.getDom(this.transform),transformValues=[];if(!this.store){this.mode='local';var d=[],opts=s.options;for(var i=0,len=opts.length;i<len;i++){var o=opts[i],oe=Ext.get(o),value=oe.getAttributeNS(null,'value')||'',cls=oe.getAttributeNS(null,'className')||'',style=oe.getAttributeNS(null,'style')||'';if(o.selected){transformValues.push(value)}d.push([value,o.text,cls,typeof(style)==="string"?style:style.cssText])}this.store=new Ext.data.SimpleStore({'id':0,fields:['value','text','cls','style'],data:d});Ext.apply(this,{valueField:'value',displayField:'text',classField:'cls',styleField:'style'})}if(transformValues.length){this.value=transformValues.join(',')}},setupFieldButtons:function(){this.buttonWrap=this.outerWrapEl.createChild({cls:'x-superboxselect-btns'});this.buttonClear=this.buttonWrap.createChild({tag:'div',cls:'x-superboxselect-btn-clear '+this.clearBtnCls});this.buttonExpand=this.buttonWrap.createChild({tag:'div',cls:'x-superboxselect-btn-expand '+this.expandBtnCls});this.initButtonEvents();return this},initButtonEvents:function(){this.buttonClear.addClassOnOver('x-superboxselect-btn-over').on('click',function(e){e.stopEvent();if(this.disabled){return}this.clearValue();this.el.focus()},this);this.buttonExpand.addClassOnOver('x-superboxselect-btn-over').on('click',function(e){e.stopEvent();if(this.disabled){return}if(this.isExpanded()){this.multiSelectMode=false}else if(this.pinList){this.multiSelectMode=true}this.onTriggerClick()},this)},removeButtonEvents:function(){this.buttonClear.removeAllListeners();this.buttonExpand.removeAllListeners();return this},clearCurrentFocus:function(){if(this.currentFocus){this.currentFocus.onLnkBlur();this.currentFocus=null}return this},initEvents:function(){var a=this.el;a.on({click:this.onClick,focus:this.clearCurrentFocus,blur:this.onBlur,keydown:this.onKeyDownHandler,keyup:this.onKeyUpBuffered,scope:this});this.on({collapse:this.onCollapse,expand:this.clearCurrentFocus,scope:this});this.wrapEl.on('click',this.onWrapClick,this);this.outerWrapEl.on('click',this.onWrapClick,this);this.inputEl.focus=function(){a.focus()};Ext.ux.form.SuperBoxSelect.superclass.initEvents.call(this);Ext.apply(this.keyNav,{tab:function(e){if(this.fixFocusOnTabSelect&&this.isExpanded()){e.stopEvent();a.blur();this.onViewClick(false);this.focus(false,10);return true}this.onViewClick(false);if(a.dom.value!==''){this.setRawValue('')}return true},down:function(e){if(!this.isExpanded()&&!this.currentFocus){this.onTriggerClick()}else{this.inKeyMode=true;this.selectNext()}},enter:function(){}})},onClick:function(){this.clearCurrentFocus();this.collapse();this.autoSize()},beforeBlur:Ext.form.ComboBox.superclass.beforeBlur,onFocus:function(){this.outerWrapEl.addClass(this.focusClass);Ext.ux.form.SuperBoxSelect.superclass.onFocus.call(this)},onBlur:function(){this.outerWrapEl.removeClass(this.focusClass);this.clearCurrentFocus();if(this.el.dom.value!==''){this.applyEmptyText();this.autoSize()}Ext.ux.form.SuperBoxSelect.superclass.onBlur.call(this)},onCollapse:function(){this.view.clearSelections();this.multiSelectMode=false},onWrapClick:function(e){e.stopEvent();this.collapse();this.el.focus();this.clearCurrentFocus()},markInvalid:function(a){var b,t;if(!this.rendered||this.preventMark){return}this.outerWrapEl.addClass(this.invalidClass);a=a||this.invalidText;switch(this.msgTarget){case'qtip':Ext.apply(this.el.dom,{qtip:a,qclass:'x-form-invalid-tip'});Ext.apply(this.wrapEl.dom,{qtip:a,qclass:'x-form-invalid-tip'});if(Ext.QuickTips){Ext.QuickTips.enable()}break;case'title':this.el.dom.title=a;this.wrapEl.dom.title=a;this.outerWrapEl.dom.title=a;break;case'under':if(!this.errorEl){b=this.getErrorCt();if(!b){this.el.dom.title=a;break}this.errorEl=b.createChild({cls:'x-form-invalid-msg'});this.errorEl.setWidth(b.getWidth(true)-20)}this.errorEl.update(a);Ext.form.Field.msgFx[this.msgFx].show(this.errorEl,this);break;case'side':if(!this.errorIcon){b=this.getErrorCt();if(!b){this.el.dom.title=a;break}this.errorIcon=b.createChild({cls:'x-form-invalid-icon'})}this.alignErrorIcon();Ext.apply(this.errorIcon.dom,{qtip:a,qclass:'x-form-invalid-tip'});this.errorIcon.show();this.on('resize',this.alignErrorIcon,this);break;default:t=Ext.getDom(this.msgTarget);t.innerHTML=a;t.style.display=this.msgDisplay;break}this.fireEvent('invalid',this,a)},clearInvalid:function(){if(!this.rendered||this.preventMark){return}this.outerWrapEl.removeClass(this.invalidClass);switch(this.msgTarget){case'qtip':this.el.dom.qtip='';this.wrapEl.dom.qtip='';break;case'title':this.el.dom.title='';this.wrapEl.dom.title='';this.outerWrapEl.dom.title='';break;case'under':if(this.errorEl){Ext.form.Field.msgFx[this.msgFx].hide(this.errorEl,this)}break;case'side':if(this.errorIcon){this.errorIcon.dom.qtip='';this.errorIcon.hide();this.un('resize',this.alignErrorIcon,this)}break;default:var t=Ext.getDom(this.msgTarget);t.innerHTML='';t.style.display='none';break}this.fireEvent('valid',this)},alignErrorIcon:function(){if(this.wrap){this.errorIcon.alignTo(this.wrap,'tl-tr',[Ext.isIE?5:2,3])}},expand:function(){if(this.isExpanded()||!this.hasFocus){return}this.list.alignTo(this.outerWrapEl,this.listAlign).show();this.innerList.setOverflow('auto');Ext.getDoc().on({mousewheel:this.collapseIf,mousedown:this.collapseIf,scope:this});this.fireEvent('expand',this)},restrictHeight:function(){var a=this.innerList.dom,st=a.scrollTop,list=this.list;a.style.height='';var b=list.getFrameWidth('tb')+(this.resizable?this.handleHeight:0)+this.assetHeight,h=Math.max(a.clientHeight,a.offsetHeight,a.scrollHeight),ha=this.getPosition()[1]-Ext.getBody().getScroll().top,hb=Ext.lib.Dom.getViewHeight()-ha-this.getSize().height,space=Math.max(ha,hb,this.minHeight||0)-list.shadowOffset-b-5;h=Math.min(h,space,this.maxHeight);this.innerList.setHeight(h);list.beginUpdate();list.setHeight(h+b);list.alignTo(this.outerWrapEl,this.listAlign);list.endUpdate();if(this.multiSelectMode){a.scrollTop=st}},validateValue:function(a){if(this.items.getCount()===0){if(this.allowBlank){this.clearInvalid();return true}else{this.markInvalid(this.blankText);return false}}this.clearInvalid();return true},manageNameAttribute:function(){if(this.items.getCount()===0&&this.forceFormValue){this.el.dom.setAttribute('name',this.hiddenName||this.name)}else{this.el.dom.removeAttribute('name')}},setupFormInterception:function(){var d;this.findParentBy(function(p){if(p.getForm){d=p.getForm()}});if(d){var e=d.getValues;d.getValues=function(a){this.el.dom.disabled=true;var b=this.el.dom.value;this.setRawValue('');var c=e.call(d);this.el.dom.disabled=false;this.setRawValue(b);if(this.forceFormValue&&this.items.getCount()===0){c[this.name]=''}return a?Ext.urlEncode(c):c}.createDelegate(this)}},onResize:function(w,h,a,b){var c=Ext.isIE6?4:Ext.isIE7?1:Ext.isIE8?1:0;if(this.wrapEl){this._width=w;this.outerWrapEl.setWidth(w-c);if(this.renderFieldBtns){c+=(this.buttonWrap.getWidth()+20);this.wrapEl.setWidth(w-c)}}Ext.ux.form.SuperBoxSelect.superclass.onResize.call(this,w,h,a,b);this.autoSize()},onEnable:function(){Ext.ux.form.SuperBoxSelect.superclass.onEnable.call(this);this.items.each(function(a){a.enable()});if(this.renderFieldBtns){this.initButtonEvents()}},onDisable:function(){Ext.ux.form.SuperBoxSelect.superclass.onDisable.call(this);this.items.each(function(a){a.disable()});if(this.renderFieldBtns){this.removeButtonEvents()}},clearValue:function(a){Ext.ux.form.SuperBoxSelect.superclass.clearValue.call(this);this.preventMultipleRemoveEvents=a||this.supressClearValueRemoveEvents||false;this.removeAllItems();this.preventMultipleRemoveEvents=false;this.fireEvent('clear',this);return this},onKeyUp:function(e){if(this.editable!==false&&(!e.isSpecialKey()||e.getKey()===e.BACKSPACE)&&e.getKey()!==this.itemDelimiterKey&&(!e.hasModifier()||e.shiftKey)){this.lastKey=e.getKey();this.dqTask.delay(this.queryDelay)}},onKeyDownHandler:function(e,t){var a,nextFocus,idx;if((e.getKey()===e.DELETE||e.getKey()===e.SPACE)&&this.currentFocus){e.stopEvent();a=this.currentFocus;this.on('expand',function(){this.collapse()},this,{single:true});idx=this.items.indexOfKey(this.currentFocus.key);this.clearCurrentFocus();if(idx<(this.items.getCount()-1)){nextFocus=this.items.itemAt(idx+1)}a.preDestroy(true);if(nextFocus){(function(){nextFocus.onLnkFocus();this.currentFocus=nextFocus}).defer(200,this)}return true}var b=this.el.dom.value,it,ctrl=e.ctrlKey;if(e.getKey()===this.itemDelimiterKey){e.stopEvent();if(b!==""){if(ctrl||!this.isExpanded()){this.view.clearSelections();this.collapse();this.setRawValue('');this.fireEvent('newitem',this,b)}else{this.onViewClick();if(this.unsetDelayCheck){this.delayedCheck=true;this.unsetDelayCheck.defer(10,this)}}}else{if(!this.isExpanded()){return}this.onViewClick();if(this.unsetDelayCheck){this.delayedCheck=true;this.unsetDelayCheck.defer(10,this)}}return true}if(b!==''){this.autoSize();return}if(e.getKey()===e.HOME){e.stopEvent();if(this.items.getCount()>0){this.collapse();it=this.items.get(0);it.el.focus()}return true}if(e.getKey()===e.BACKSPACE){e.stopEvent();if(this.currentFocus){a=this.currentFocus;this.on('expand',function(){this.collapse()},this,{single:true});idx=this.items.indexOfKey(a.key);this.clearCurrentFocus();if(idx<(this.items.getCount()-1)){nextFocus=this.items.itemAt(idx+1)}a.preDestroy(true);if(nextFocus){(function(){nextFocus.onLnkFocus();this.currentFocus=nextFocus}).defer(200,this)}return}else{it=this.items.get(this.items.getCount()-1);if(it){if(this.backspaceDeletesLastItem){this.on('expand',function(){this.collapse()},this,{single:true});it.preDestroy(true)}else{if(this.navigateItemsWithTab){it.onElClick()}else{this.on('expand',function(){this.collapse();this.currentFocus=it;this.currentFocus.onLnkFocus.defer(20,this.currentFocus)},this,{single:true})}}}return true}}if(!e.isNavKeyPress()){this.multiSelectMode=false;this.clearCurrentFocus();return}if(e.getKey()===e.LEFT||(e.getKey()===e.UP&&!this.isExpanded())){e.stopEvent();this.collapse();it=this.items.get(this.items.getCount()-1);if(this.navigateItemsWithTab){if(it){it.focus()}}else{if(this.currentFocus){idx=this.items.indexOfKey(this.currentFocus.key);this.clearCurrentFocus();if(idx!==0){this.currentFocus=this.items.itemAt(idx-1);this.currentFocus.onLnkFocus()}}else{this.currentFocus=it;if(it){it.onLnkFocus()}}}return true}if(e.getKey()===e.DOWN){if(this.currentFocus){this.collapse();e.stopEvent();idx=this.items.indexOfKey(this.currentFocus.key);if(idx==(this.items.getCount()-1)){this.clearCurrentFocus.defer(10,this)}else{this.clearCurrentFocus();this.currentFocus=this.items.itemAt(idx+1);if(this.currentFocus){this.currentFocus.onLnkFocus()}}return true}}if(e.getKey()===e.RIGHT){this.collapse();it=this.items.itemAt(0);if(this.navigateItemsWithTab){if(it){it.focus()}}else{if(this.currentFocus){idx=this.items.indexOfKey(this.currentFocus.key);this.clearCurrentFocus();if(idx<(this.items.getCount()-1)){this.currentFocus=this.items.itemAt(idx+1);if(this.currentFocus){this.currentFocus.onLnkFocus()}}}else{this.currentFocus=it;if(it){it.onLnkFocus()}}}}},onKeyUpBuffered:function(e){if(!e.isNavKeyPress()){this.autoSize()}},reset:function(){this.killItems();Ext.ux.form.SuperBoxSelect.superclass.reset.call(this);this.addedRecords=[];this.autoSize().setRawValue('')},applyEmptyText:function(){this.setRawValue('');if(this.items.getCount()>0){this.el.removeClass(this.emptyClass);this.setRawValue('');return this}if(this.rendered&&this.emptyText&&this.getRawValue().length<1){this.setRawValue(this.emptyText);this.el.addClass(this.emptyClass)}return this},removeAllItems:function(){this.items.each(function(a){a.preDestroy(true)},this);this.manageClearBtn();return this},killItems:function(){this.items.each(function(a){a.kill()},this);this.resetStore();this.items.clear();this.manageClearBtn();return this},resetStore:function(){this.store.clearFilter();if(!this.removeValuesFromStore){return this}this.usedRecords.each(function(a){this.store.add(a)},this);this.usedRecords.clear();this.sortStore();return this},sortStore:function(){var a=this.store.getSortState();if(a&&a.field){this.store.sort(a.field,a.direction)}return this},getCaption:function(a){if(typeof this.displayFieldTpl==='string'){this.displayFieldTpl=new Ext.XTemplate(this.displayFieldTpl)}var b,recordData=a instanceof Ext.data.Record?a.data:a;if(this.displayFieldTpl){b=this.displayFieldTpl.apply(recordData)}else if(this.displayField){b=recordData[this.displayField]}return b},addRecord:function(a){var b=a.data[this.displayField],caption=this.getCaption(a),val=a.data[this.valueField],cls=this.classField?a.data[this.classField]:'',style=this.styleField?a.data[this.styleField]:'';if(this.removeValuesFromStore){this.usedRecords.add(val,a);this.store.remove(a)}this.addItemBox(val,b,caption,cls,style);this.fireEvent('additem',this,val,a)},createRecord:function(a){if(!this.recordConstructor){var b=[{name:this.valueField},{name:this.displayField}];if(this.classField){b.push({name:this.classField})}if(this.styleField){b.push({name:this.styleField})}this.recordConstructor=Ext.data.Record.create(b)}return new this.recordConstructor(a)},addItems:function(b){if(Ext.isArray(b)){Ext.each(b,function(a){this.addItem(a)},this)}else{this.addItem(b)}},addNewItem:function(a){this.addItem(a,true)},addItem:function(a,b){var c=a[this.valueField];if(this.disabled){return false}if(this.preventDuplicates&&this.hasValue(c)){return}var d=this.findRecord(this.valueField,c);if(d){this.addRecord(d);return}else if(!this.allowAddNewData){return}if(this.mode==='remote'){this.remoteLookup.push(a);this.doQuery(c,false,false,b);return}var e=this.createRecord(a);this.store.add(e);this.addRecord(e);return true},addItemBox:function(b,c,d,e,f){var g,parseStyle=function(s){var a='';if(typeof s=='function'){a=s.call()}else if(typeof s=='object'){for(var p in s){a+=p+':'+s[p]+';'}}else if(typeof s=='string'){a=s+';'}return a},itemKey=b/*Ext.id(null,'sbx-item')*/,box=new Ext.ux.form.SuperBoxSelectItem({owner:this,disabled:this.disabled,renderTo:this.wrapEl,cls:this.extraItemCls+' '+e,style:parseStyle(this.extraItemStyle)+' '+f,caption:d,display:c,value:b,key:itemKey,listeners:{'remove':function(a){if(this.fireEvent('beforeremoveitem',this,a.value)===false){return}this.items.removeKey(a.key);if(this.removeValuesFromStore){if(this.usedRecords.containsKey(a.value)){this.store.add(this.usedRecords.get(a.value));this.usedRecords.removeKey(a.value);this.sortStore();if(this.view){this.view.render()}}}if(!this.preventMultipleRemoveEvents){this.fireEvent.defer(250,this,['removeitem',this,a.value,this.findInStore(a.value)])}},destroy:function(){this.collapse();this.autoSize().manageClearBtn().validateValue()},scope:this}});box.render();g={tag:'input',type:'hidden',value:b,name:(this.hiddenName||this.name)};if(this.disabled){Ext.apply(g,{disabled:'disabled'})}box.hidden=this.el.insertSibling(g,'before');this.items.add(itemKey,box);this.applyEmptyText().autoSize().manageClearBtn().validateValue()},manageClearBtn:function(){if(!this.renderFieldBtns||!this.rendered){return this}var a='x-superboxselect-btn-hide';if(this.items.getCount()===0){this.buttonClear.addClass(a)}else{this.buttonClear.removeClass(a)}return this},findInStore:function(a){var b=this.store.find(this.valueField,a);if(b>-1){return this.store.getAt(b)}return false},getValue:function(){var b=[];this.items.each(function(a){b.push(a.value)});return b.join(this.valueDelimiter)},getValueEx:function(){var c=[];this.items.each(function(a){var b={};b[this.valueField]=a.value;b[this.displayField]=a.display;if(this.classField){b[this.classField]=a.cls||''}if(this.styleField){b[this.styleField]=a.style||''}c.push(b)},this);return c},initValue:function(){Ext.ux.form.SuperBoxSelect.superclass.initValue.call(this);if(this.mode==='remote'){this.setOriginal=true}},setValue:function(c){if(!this.rendered){this.value=c;return}this.removeAllItems().resetStore();this.remoteLookup=[];if(Ext.isEmpty(c)){return}var d=c;if(!Ext.isArray(c)){c=''+c;d=c.split(this.valueDelimiter)}Ext.each(d,function(a){var b=this.findRecord(this.valueField,a);if(b){this.addRecord(b)}else if(this.mode==='remote'){this.remoteLookup.push(a)}},this);if(this.mode==='remote'){var q=this.remoteLookup.join(this.queryValuesDelimiter);this.doQuery(q,false,true)}},setValueEx:function(b){this.removeAllItems().resetStore();if(!Ext.isArray(b)){b=[b]}this.remoteLookup=[];if(this.allowAddNewData&&this.mode==='remote'){Ext.each(b,function(d){var r=this.findRecord(this.valueField,d[this.valueField])||this.createRecord(d);this.addRecord(r)},this);return}Ext.each(b,function(a){this.addItem(a)},this)},hasValue:function(b){var c=false;this.items.each(function(a){if(a.value==b){c=true;return false}},this);return c},onSelect:function(a,b){if(this.fireEvent('beforeselect',this,a,b)!==false){var c=a.data[this.valueField];if(this.preventDuplicates&&this.hasValue(c)){return}this.setRawValue('');this.lastSelectionText='';if(this.fireEvent('beforeadditem',this,c)!==false){this.addRecord(a)}if(this.store.getCount()===0||!this.multiSelectMode){this.collapse()}else{this.restrictHeight()}}},onDestroy:function(){this.items.purgeListeners();this.killItems();if(this.renderFieldBtns){Ext.destroy(this.buttonClear,this.buttonExpand,this.buttonWrap)}Ext.destroy(this.inputEl,this.wrapEl,this.outerWrapEl);Ext.ux.form.SuperBoxSelect.superclass.onDestroy.call(this)},autoSize:function(){if(!this.rendered){return this}if(!this.metrics){this.metrics=Ext.util.TextMetrics.createInstance(this.el)}var a=this.el,v=a.dom.value,d=document.createElement('div');if(v===""&&this.emptyText&&this.items.getCount()<1){v=this.emptyText}d.appendChild(document.createTextNode(v));v=d.innerHTML;d=null;v+="&#160;";var w=Math.max(this.metrics.getWidth(v)+24,24);if(typeof this._width!='undefined'){w=Math.min(this._width,w)}this.el.setWidth(w);if(Ext.isIE){this.el.dom.style.top='0'}return this},doQuery:function(q,a,b,c){q=Ext.isEmpty(q)?'':q;var d={query:q,forceAll:a,combo:this,cancel:false};if(this.fireEvent('beforequery',d)===false||d.cancel){return false}q=d.query;a=d.forceAll;if(a===true||(q.length>=this.minChars)||b&&!Ext.isEmpty(q)){if(this.lastQuery!==q||c){this.lastQuery=q;if(this.mode=='local'){this.selectedIndex=-1;if(a){this.store.clearFilter()}else{this.store.filter(this.displayField,q)}this.onLoad()}else{this.store.baseParams[this.queryParam]=q;this.store.baseParams[this.queryValuesIndicator]=b;this.store.load({params:this.getParams(q)});if(!c){this.expand()}}}else{this.selectedIndex=-1;this.onLoad()}}}});Ext.reg('superboxselect',Ext.ux.form.SuperBoxSelect);Ext.ux.form.SuperBoxSelectItem=function(a){Ext.apply(this,a);Ext.ux.form.SuperBoxSelectItem.superclass.constructor.call(this)};Ext.ux.form.SuperBoxSelectItem=Ext.extend(Ext.ux.form.SuperBoxSelectItem,Ext.Component,{initComponent:function(){Ext.ux.form.SuperBoxSelectItem.superclass.initComponent.call(this)},onElClick:function(e){var o=this.owner;o.clearCurrentFocus().collapse();if(o.navigateItemsWithTab){this.focus()}else{o.el.dom.focus();var a=this;(function(){this.onLnkFocus();o.currentFocus=this}).defer(10,this)}},onLnkClick:function(e){if(e){e.stopEvent()}this.preDestroy();if(!this.owner.navigateItemsWithTab){this.owner.el.focus()}},onLnkFocus:function(){this.el.addClass("x-superboxselect-item-focus");this.owner.outerWrapEl.addClass("x-form-focus")},onLnkBlur:function(){this.el.removeClass("x-superboxselect-item-focus");this.owner.outerWrapEl.removeClass("x-form-focus")},enableElListeners:function(){this.el.on('click',this.onElClick,this,{stopEvent:true});this.el.addClassOnOver('x-superboxselect-item x-superboxselect-item-hover')},enableLnkListeners:function(){this.lnk.on({click:this.onLnkClick,focus:this.onLnkFocus,blur:this.onLnkBlur,scope:this})},enableAllListeners:function(){this.enableElListeners();this.enableLnkListeners()},disableAllListeners:function(){this.el.removeAllListeners();this.lnk.un('click',this.onLnkClick,this);this.lnk.un('focus',this.onLnkFocus,this);this.lnk.un('blur',this.onLnkBlur,this)},onRender:function(a,b){Ext.ux.form.SuperBoxSelectItem.superclass.onRender.call(this,a,b);var d=this.el;if(d){d.remove()}this.el=d=a.createChild({tag:'li'},a.last());d.addClass('x-superboxselect-item');var e=this.owner.navigateItemsWithTab?(Ext.isSafari?'button':'a'):'span';var f=this.key;Ext.apply(d,{focus:function(){var c=this.down(e+'.x-superboxselect-item-close');if(c){c.focus()}},preDestroy:function(){this.preDestroy()}.createDelegate(this)});this.enableElListeners();d.update(this.caption);var g={tag:e,'class':'x-superboxselect-item-close',tabIndex:this.owner.navigateItemsWithTab?'0':'-1'};if(e==='a'){g.href='#'}this.lnk=d.createChild(g);if(!this.disabled){this.enableLnkListeners()}else{this.disableAllListeners()}this.on({disable:this.disableAllListeners,enable:this.enableAllListeners,scope:this});this.setupKeyMap()},setupKeyMap:function(){this.keyMap=new Ext.KeyMap(this.lnk,[{key:[Ext.EventObject.BACKSPACE,Ext.EventObject.DELETE,Ext.EventObject.SPACE],fn:this.preDestroy,scope:this},{key:[Ext.EventObject.RIGHT,Ext.EventObject.DOWN],fn:function(){this.moveFocus('right')},scope:this},{key:[Ext.EventObject.LEFT,Ext.EventObject.UP],fn:function(){this.moveFocus('left')},scope:this},{key:[Ext.EventObject.HOME],fn:function(){var l=this.owner.items.get(0).el.focus();if(l){l.el.focus()}},scope:this},{key:[Ext.EventObject.END],fn:function(){this.owner.el.focus()},scope:this},{key:Ext.EventObject.ENTER,fn:function(){}}]);this.keyMap.stopEvent=true},moveFocus:function(a){var b=this.el[a=='left'?'prev':'next']()||this.owner.el;b.focus.defer(100,b)},preDestroy:function(a){if(this.fireEvent('remove',this)===false){return}var b=function(){if(this.owner.navigateItemsWithTab){this.moveFocus('right')}this.hidden.remove();this.hidden=null;this.destroy()};if(a){b.call(this)}else{this.el.hide({duration:0.2,callback:b,scope:this})}return this},kill:function(){this.hidden.remove();this.hidden=null;this.purgeListeners();this.destroy()},onDisable:function(){if(this.hidden){this.hidden.dom.setAttribute('disabled','disabled')}this.keyMap.disable();Ext.ux.form.SuperBoxSelectItem.superclass.onDisable.call(this)},onEnable:function(){if(this.hidden){this.hidden.dom.removeAttribute('disabled')}this.keyMap.enable();Ext.ux.form.SuperBoxSelectItem.superclass.onEnable.call(this)},onDestroy:function(){Ext.destroy(this.lnk,this.el);Ext.ux.form.SuperBoxSelectItem.superclass.onDestroy.call(this)}});
Ext.ux.form.CheckboxCombo=Ext.extend(Ext.form.TriggerField,{defaultAutoCreate:{tag:"input",type:"text",size:"24",autocomplete:"off"},listClass:'',listEmptyText:'',triggerClass:'x-form-arrow-trigger',shadow:'sides',listAlign:'tl-bl?',maxHeight:300,minHeight:90,selectOnFocus:false,editable:false,loadingText:'Loading...',resizable:false,handleHeight:8,mode:'remote',minListWidth:70,lazyInit:true,submitValue:undefined,initComponent:function(){Ext.ux.form.CheckboxCombo.superclass.initComponent.call(this);this.addEvents('expand','collapse');if(this.store){this.store=Ext.StoreMgr.lookup(this.store);if(this.store.autoCreated){this.displayField=this.valueField='field1';if(!this.store.expandData){this.displayField='field2'}this.mode='local'}}this.selectedIndex=-1},onRender:function(a,b){if(this.hiddenName&&!Ext.isDefined(this.submitValue)){this.submitValue=false}Ext.ux.form.CheckboxCombo.superclass.onRender.call(this,a,b);if(this.hiddenName){this.hiddenField=this.el.insertSibling({tag:'input',type:'hidden',name:this.hiddenName,id:(this.hiddenId||this.hiddenName)},'before',true)}if(Ext.isGecko){this.el.dom.setAttribute('autocomplete','off')}if(!this.lazyInit){this.initList()}else{this.on('focus',this.initList,this,{single:true})}},initValue:function(){Ext.ux.form.CheckboxCombo.superclass.initValue.call(this);if(this.hiddenField){this.hiddenField.value=Ext.value(Ext.isDefined(this.hiddenValue)?this.hiddenValue:this.value,'')}},initList:function(){if(!this.list){var b='x-checkboxcombo-list',listParent=Ext.getDom(this.getListParent()||Ext.getBody()),zindex=parseInt(Ext.fly(listParent).getStyle('z-index'),10);if(this.ownerCt&&!zindex){this.findParentBy(function(a){zindex=parseInt(a.getPositionEl().getStyle('z-index'),10);return!!zindex})}this.list=new Ext.Layer({parentEl:listParent,shadow:this.shadow,cls:[b,this.listClass].join(' '),constrain:false,zindex:(zindex||12000)+5});var c=this.listWidth||Math.max(this.wrap.getWidth(),this.minListWidth);this.list.setWidth(c);this.list.swallowEvent('mousewheel');this.assetHeight=0;if(this.syncFont!==false){this.list.setStyle('font-size',this.el.getStyle('font-size'))}this.innerList=this.list.createChild({cls:b+'-inner'});this.innerList.setWidth(c-this.list.getFrameWidth('lr'));this.mon(this.innerList,'mouseover',this.onListOver,this,{delegate:'.x-form-item'});this.mon(this.innerList,'mousemove',this.onListMove,this,{delegate:'.x-form-item'});this.mon(this.innerList,'click',this.onListClick,this,{delegate:'.x-form-item'});this.cbgroup=new Ext.form.CheckboxGroup({renderTo:this.innerList,columns:1,autoHeight:true,border:false,items:[{}]});this.bindStore(this.store,true);if(this.resizable){this.resizer=new Ext.Resizable(this.list,{pinned:true,handles:'se'});this.mon(this.resizer,'resize',function(r,w,h){this.maxHeight=h-this.handleHeight-this.list.getFrameWidth('tb')-this.assetHeight;this.listWidth=w;this.innerList.setWidth(w-this.list.getFrameWidth('lr'));this.restrictHeight()},this);this['innerList'].setStyle('margin-bottom',this.handleHeight+'px')}}},getListParent:function(){return document.body},getStore:function(){return this.store},bindStore:function(a,b){if(this.store&&!b){if(this.store!==a&&this.store.autoDestroy){this.store.destroy()}else{this.store.un('beforeload',this.onBeforeLoad,this);this.store.un('load',this.onLoad,this);this.store.un('exception',this.collapse,this)}if(!a){this.store=null}}if(a){if(!b){this.lastQuery=null}this.store=Ext.StoreMgr.lookup(a);this.store.on({scope:this,beforeload:this.onBeforeLoad,load:this.onLoad,exception:this.collapse})}this.removeCheckboxes();this.addCheckboxes()},initEvents:function(){Ext.ux.form.CheckboxCombo.superclass.initEvents.call(this);this.keyNav=new Ext.KeyNav(this.el,{'up':function(e){this.inKeyMode=true;this.selectPrev()},'down':function(e){if(!this.isExpanded()){this.onTriggerClick()}else{this.inKeyMode=true;this.selectNext()}},'enter':function(e){this.onListEnter()},'esc':function(e){this.collapse()},'tab':function(e){this.collapse();return true},scope:this,doRelay:function(e,h,a){if(a=='down'||this.scope.isExpanded()){var b=Ext.KeyNav.prototype.doRelay.apply(this,arguments);if(!Ext.isIE&&Ext.EventManager.useKeydown){this.scope.fireKey(e)}return b}return true},forceKeyDown:true,defaultEventAction:'stopEvent'});if(!this.enableKeyEvents){this.mon(this.el,'keyup',this.onKeyUp,this)}},onDestroy:function(){this.bindStore(null);Ext.destroy(this.resizer,this.cbgroup,this.list);Ext.destroyMembers(this,'hiddenField');Ext.ux.form.CheckboxCombo.superclass.onDestroy.call(this)},fireKey:function(e){if(!this.isExpanded()){Ext.ux.form.CheckboxCombo.superclass.fireKey.call(this,e)}},onResize:function(w,h){Ext.ux.form.CheckboxCombo.superclass.onResize.apply(this,arguments);if(this.isVisible()&&this.list){this.doResize(w)}else{this.bufferSize=w}},doResize:function(w){if(!Ext.isDefined(this.listWidth)){var a=Math.max(w,this.minListWidth);this.list.setWidth(a);this.innerList.setWidth(a-this.list.getFrameWidth('lr'))}},onEnable:function(){Ext.ux.form.CheckboxCombo.superclass.onEnable.apply(this,arguments);if(this.hiddenField){this.hiddenField.disabled=false}},onDisable:function(){Ext.ux.form.CheckboxCombo.superclass.onDisable.apply(this,arguments);if(this.hiddenField){this.hiddenField.disabled=true}},onBeforeLoad:function(){if(!this.hasFocus){return}this.removeCheckboxes()},onLoad:function(){if(!this.hasFocus){return}if(this.store.getCount()>0||this.listEmptyText){this.addCheckboxes();this.expand();this.restrictHeight()}else{this.collapse()}},getName:function(){var a=this.hiddenField;return a&&a.name?a.name:this.hiddenName||Ext.ux.form.CheckboxCombo.superclass.getName.call(this)},assertValue:function(){var b=this.cbgroup.getValue();if(b){var c=[];Ext.each(this.cbgroup.getValue(),function(a){c.push(a.inputValue)});this.setValue(c)}else{this.clearValue()}},setValue:function(a){if(typeof a=='string'){a=a.split(',')}var b=[];Ext.each(a,function(v){if(this.valueField){var r=this.findRecord(this.valueField,v);if(r){b.push(r.data[this.displayField]);r.checked=true}}},this);if(this.hiddenField){this.hiddenField.value=Ext.value(a.join(','),'')}this.lastSelectionText=b.join(', ');Ext.ux.form.CheckboxCombo.superclass.setValue.call(this,b.join(', '));this.value=a.join(',');return this},getValue:function(){if(this.valueField){return Ext.isDefined(this.value)?this.value:''}else{return Ext.ux.form.CheckboxCombo.superclass.getValue.call(this)}},clearValue:function(){if(this.hiddenField){this.hiddenField.value=''}this.setRawValue('');this.lastSelectionText='';this.applyEmptyText();this.value=''},findRecord:function(a,b){var c;if(this.store.getCount()>0){c=this.store.getAt(this.store.find(a,b));return(c?c:false)}},onListMove:function(e,t){this.inKeyMode=false},onListOver:function(e,t){var a=e.getTarget('div.x-form-item');if(a){a=Ext.get(a);a.radioClass('x-checkboxcombo-item-over')}},onListClick:function(e,t){if(Ext.get(e.getTarget()).dom.tagName=='INPUT'||Ext.get(e.getTarget()).dom.tagName=='LABEL'){return}var a=e.getTarget('div.x-form-item');if(a){a=Ext.get(a);var b=a.child('input');b=Ext.getCmp(b.id);b.setValue(b.getValue()?false:true)}},onListEnter:function(e,t){var a=Ext.DomQuery.selectNode('.x-checkboxcombo-item-over',this.list.dom);if(a){a=Ext.get(a);var b=a.child('input');b=Ext.getCmp(b.id);b.setValue(b.getValue()?false:true)}},restrictHeight:function(){this.innerList.dom.style.height='';var a=this.innerList.dom,pad=this.list.getFrameWidth('tb')+(this.resizable?this.handleHeight:0)+this.assetHeight,h=Math.max(a.clientHeight,a.offsetHeight,a.scrollHeight),ha=this.getPosition()[1]-Ext.getBody().getScroll().top,hb=Ext.lib.Dom.getViewHeight()-ha-this.getSize().height,space=Math.max(ha,hb,this.minHeight||0)-this.list.shadowOffset-pad-5;h=Math.min(h,space,this.maxHeight);this.innerList.setHeight(h);this.list.beginUpdate();this.list.setHeight(h+pad);this.list.alignTo.apply(this.list,[this.el].concat(this.listAlign));this.list.endUpdate()},isExpanded:function(){return this.list&&this.list.isVisible()},selectNext:function(){var a=this.store.getCount();if(a>0){var b=Ext.DomQuery.selectNode('.x-checkboxcombo-item-over',this.list.dom);if(!b){this.innerList.child('.x-form-item').radioClass('x-checkboxcombo-item-over')}else{Ext.get(b).next().radioClass('x-checkboxcombo-item-over')}}},selectPrev:function(){var a=this.store.getCount();if(a>0){var b=Ext.DomQuery.selectNode('.x-checkboxcombo-item-over',this.list.dom);if(!b){this.innerList.child('.x-form-item').radioClass('x-checkboxcombo-item-over')}else{Ext.get(b).prev().radioClass('x-checkboxcombo-item-over')}}},validateBlur:function(){return!this.list||!this.list.isVisible()},beforeBlur:function(){this.assertValue()},postBlur:function(){Ext.ux.form.CheckboxCombo.superclass.postBlur.call(this);this.collapse();this.inKeyMode=false},collapse:function(){if(!this.isExpanded()){return}this.list.hide();Ext.getDoc().un('mousewheel',this.collapseIf,this);Ext.getDoc().un('mousedown',this.collapseIf,this);this.beforeBlur();this.fireEvent('collapse',this)},collapseIf:function(e){if(!e.within(this.wrap)&&!e.within(this.list)){this.collapse()}},expand:function(){if(this.isExpanded()||!this.hasFocus){return}if(this.bufferSize){this.doResize(this.bufferSize);delete this.bufferSize}this.list.alignTo.apply(this.list,[this.el].concat(this.listAlign));this.list.show();if(Ext.isGecko2){this.innerList.setOverflow('auto')}this.mon(Ext.getDoc(),{scope:this,mousewheel:this.collapseIf,mousedown:this.collapseIf});this.fireEvent('expand',this)},removeCheckboxes:function(){for(var i=0;i<this.cbgroup.columns;i++){if(this.cbgroup.panel.getComponent(i).items.length>0){this.cbgroup.panel.getComponent(i).items.each(function(a){a.destroy()})}}},addCheckboxes:function(){Ext.each(this.store.data.items,function(a){var b=new Ext.form.Checkbox({name:a.data.id+'-checkbox',boxLabel:a.data[this.displayField],inputValue:a.data[this.valueField],checked:(a.checked?a.checked:false)});var c=this.cbgroup.panel.items.get(0);this.cbgroup.items.add(b);c.add(b);this.cbgroup.panel.doLayout()},this)},onTriggerClick:function(){if(this.readOnly||this.disabled){return}if(this.isExpanded()){this.collapse();this.el.focus()}else{this.onFocus({});this.expand();this.el.focus()}},gridRenderer:function(a){if(typeof a=='string'){a=a.split(',')}var b=[];Ext.each(a,function(v){if(this.valueField){var r=this.findRecord(this.valueField,v);if(r){b.push(r.data[this.displayField])}}},this);return b.join(', ')}});Ext.reg('checkboxcombo',Ext.ux.form.CheckboxCombo);
Ext.form.MaskFormattedField=function(_1){var _2={placeholder:"_",autocomplete:"off",mask:"(###)###-####"};Ext.applyIf(_1,_2);Ext.form.MaskFormattedField.superclass.constructor.call(this,_1);};Ext.extend(Ext.form.MaskFormattedField,Ext.form.TextField,{initEvents:function(){Ext.form.MaskFormattedField.superclass.initEvents.call(this);this.el.on("keydown",this.mapKeyToBehavior,this);this.el.on("keypress",this.stopEventFunction,this);this.el.on("keyup",this.stopEventFunction,this);},render:function(ct,_4){if(!this.vtype){var _5=this.mask.replace(/#/g,"\\d");_5=_5.replace(/\(/,"\\(");_5=_5.replace(/\)/,"\\)");this.regex=eval("/^"+_5+"$/");if(this.invalidMessage){this.regexText=this.invalidMessage;}else{this.regexText="This field has a required format of "+this.mask;}}Ext.form.MaskFormattedField.superclass.render.call(this,ct,_4);this.doSelection();},reset:function(ct,_7){Ext.form.MaskFormattedField.superclass.reset.call(this);this.doSelection();},KEY_RANGES:{numeric:[48,57],padnum:[96,105],characters:[65,90],all:[0,255]},isInRange:function(_8,_9){return _8>=_9[0]&&_8<=_9[1];},getRange:function(_a){var _b=[];switch(_a){case "#":_b.push(this.KEY_RANGES["numeric"]);break;case "?":_b.push(this.KEY_RANGES["characters"]);break;case "*":_b.push(this.KEY_RANGES["all"]);break;default:return null;}return _b;},isMaskChar:function(_c){return this.getRange(_c)!=null;},getDefaultString:function(){var _d="";var _e=this.mask;for(var i=0;i<_e.length;i++){var chr=_e.charAt(i);_d+=this.isMaskChar(chr)?this.placeholder:chr;}return _d;},doBackspace:function(){this.moveCaret(-1);this.doDelete();},doDelete:function(){if(this.isMaskChar(this.mask.charAt(this.getCaretPosition().left))){var _11=this.getCaretPosition().left;var _12=this.el.dom.value.substr(0,_11);var _13=this.el.dom.value.substr(_11+1,this.el.dom.value.length-1);this.el.dom.value=_12+this.placeholder+_13;this.setSelection(_11);}},getCaretPosition:function(){var _14,right;if(!this.el.dom){return null;}var _15=this.el.dom;if(_15.createTextRange){var _16=document.selection.createRange().duplicate();_16.moveEnd("character",_15.value.length);if(!_16.text){_14=_15.value.length;}else{_14=_15.value.lastIndexOf(_16.text);}_16=document.selection.createRange().duplicate();_16.moveStart("character",-(_15.value.length));right=_16.text.length;}else{_14=_15.selectionStart;right=_15.selectionEnd;}return {left:_14,right:right};},setSelection:function(_17,_18){var _19=_17;var _1a=_18||_19+1;if(this.el.dom.createTextRange){var _1b=this.el.dom.createTextRange();_1b.moveStart("character",_19);_1b.moveEnd("character",_1a-this.el.dom.value.length);_1b.select();}else{this.el.dom.setSelectionRange(_19,_19);}},doMask:function(key){if(this.isInRange(key,this.KEY_RANGES["padnum"])){key-=48;}var _1d=this.getCaretPosition().left;if(_1d>=this.mask.length){return;}while(!(this.isMaskChar(this.mask.charAt(_1d)))&&(_1d<this.mask.length)){_1d++;}var _1e=this.getRange(this.mask.charAt(_1d));var _1f=false;for(var i=0;i<_1e.length;i++){if(this.isInRange(key,_1e[i])){_1f=true;break;}}if(_1f){var _21=this.el.dom.value;var _22=_21.substr(0,_1d);var _23=_21.substr((_1d+1),(_21.length-1));this.el.dom.value=_22+String.fromCharCode(key)+_23;var _24=_1d;do{_1d++;}while(!(this.isMaskChar(this.mask.charAt(_1d)))&&(_1d<_21.length));this.setSelection(_1d);}},mapKeyToBehavior:function(evt){var key=evt.getKey();switch(key){case Ext.EventObject.BACKSPACE:this.doBackspace();break;case Ext.EventObject.DELETE:this.doDelete();break;case Ext.EventObject.HOME:this.setSelection(0);break;case Ext.EventObject.END:this.setSelection(this.el.dom.value.length-1);break;case Ext.EventObject.RIGHT:this.moveCaret(1);break;case Ext.EventObject.LEFT:this.moveCaret(-1);break;case Ext.EventObject.TAB:case Ext.EventObject.ENTER:return;default:this.doMask(key);}evt.stopEvent();},doSelection:function(evt){if(!this.el.dom.value){this.el.dom.value=this.getDefaultString();}var pos=1;if(pos==this.el.dom.value.length){pos--;}if(!this.isMaskChar(this.mask.charAt(pos))){if(!this.moveCaret(1)){this.moveCaret(-1);}}else{this.setSelection(pos);}},moveCaret:function(_29,_2a){var _2b=_2a||this.getCaretPosition().left;if(_29==0){return false;}if(_2b==0&&_29<0){return false;}if((_2b>=(this.el.dom.value.length-1))&&(_29>0)){return false;}do{_2b+=_29;}while(!(this.isMaskChar(this.mask.charAt(_2b)))&&(_2b>0)&&(_2b<this.el.dom.value.length));if(!(this.isMaskChar(this.mask.charAt(_2b)))){return false;}this.setSelection(_2b);return true;},stopEventFunction:function(evt){evt.stopEvent();},clear:function(){console.log(this);this.el.dom.value=this.getDefaultString();}});Ext.reg("maskformatter",Ext.form.MaskFormattedField);
Ext.ux.StatusBar=Ext.extend(Ext.Toolbar,{cls:'x-statusbar',busyIconCls:'x-status-busy',busyText:'Loading...',autoClear:5000,emptyText:'&nbsp;',activeThreadId:0,initComponent:function(){if(this.statusAlign=='right'){this.cls+=' x-status-right'}Ext.ux.StatusBar.superclass.initComponent.call(this)},afterRender:function(){Ext.ux.StatusBar.superclass.afterRender.call(this);var a=this.statusAlign=='right';this.currIconCls=this.iconCls||this.defaultIconCls;this.statusEl=new Ext.Toolbar.TextItem({cls:'x-status-text '+(this.currIconCls||''),text:this.text||this.defaultText||''});if(a){this.add('->');this.add(this.statusEl)}else{this.insert(0,this.statusEl);this.insert(1,'->')}},setStatus:function(o){o=o||{};if(typeof o=='string'){o={text:o}}if(o.text!==undefined){this.setText(o.text)}if(o.iconCls!==undefined){this.setIcon(o.iconCls)}if(o.clear){var c=o.clear,wait=this.autoClear,defaults={useDefaults:true,anim:true};if(typeof c=='object'){c=Ext.applyIf(c,defaults);if(c.wait){wait=c.wait}}else if(typeof c=='number'){wait=c;c=defaults}else if(typeof c=='boolean'){c=defaults}c.threadId=this.activeThreadId;this.clearStatus.defer(wait,this,[c])}return this},clearStatus:function(o){o=o||{};if(o.threadId&&o.threadId!==this.activeThreadId){return this}var a=o.useDefaults?this.defaultText:this.emptyText,iconCls=o.useDefaults?(this.defaultIconCls?this.defaultIconCls:''):'';if(o.anim){this.statusEl.el.fadeOut({remove:false,useDisplay:true,scope:this,callback:function(){this.setStatus({text:a,iconCls:iconCls});this.statusEl.el.show()}})}else{this.statusEl.hide();this.setStatus({text:a,iconCls:iconCls});this.statusEl.show()}return this},setText:function(a){this.activeThreadId++;this.text=a||'';if(this.rendered){this.statusEl.setText(this.text)}return this},getText:function(){return this.text},setIcon:function(a){this.activeThreadId++;a=a||'';if(this.rendered){if(this.currIconCls){this.statusEl.removeClass(this.currIconCls);this.currIconCls=null}if(a.length>0){this.statusEl.addClass(a);this.currIconCls=a}}else{this.currIconCls=a}return this},showBusy:function(o){if(typeof o=='string'){o={text:o}}o=Ext.applyIf(o||{},{text:this.busyText,iconCls:this.busyIconCls});return this.setStatus(o)}});Ext.reg('statusbar',Ext.ux.StatusBar);
Ext.ux.ValidationStatus=Ext.extend(Ext.Component,{errorIconCls:'x-status-error',errorListCls:'x-status-error-list',validIconCls:'x-status-valid',showText:'The form has errors (click for details...)',hideText:'Click again to hide the error list',submitText:'Saving...',init:function(c){c.on('render',function(){this.statusBar=c;this.monitor=true;this.errors=new Ext.util.MixedCollection();this.listAlign=(c.statusAlign=='right'?'br-tr?':'bl-tl?');if(this.form){this.form=Ext.getCmp(this.form).getForm();this.startMonitoring();this.form.on('beforeaction',function(f,a){if(a.type=='submit'){this.monitor=false}},this);var b=function(){this.monitor=true};this.form.on('actioncomplete',b,this);this.form.on('actionfailed',b,this)}},this,{single:true});c.on({scope:this,afterlayout:{single:true,fn:function(){c.statusEl.getEl().on('click',this.onStatusClick,this,{buffer:200})}},beforedestroy:{single:true,fn:this.onDestroy}})},startMonitoring:function(){this.form.items.each(function(f){f.on('invalid',this.onFieldValidation,this);f.on('valid',this.onFieldValidation,this)},this)},stopMonitoring:function(){this.form.items.each(function(f){f.un('invalid',this.onFieldValidation,this);f.un('valid',this.onFieldValidation,this)},this)},onDestroy:function(){this.stopMonitoring();this.statusBar.statusEl.un('click',this.onStatusClick,this);Ext.ux.ValidationStatus.superclass.onDestroy.call(this)},onFieldValidation:function(f,a){if(!this.monitor){return false}if(a){this.errors.add(f.id,{field:f,msg:a})}else{this.errors.removeKey(f.id)}this.updateErrorList();if(this.errors.getCount()>0){if(this.statusBar.getText()!=this.showText){this.statusBar.setStatus({text:this.showText,iconCls:this.errorIconCls})}}else{this.statusBar.clearStatus().setIcon(this.validIconCls)}},updateErrorList:function(){if(this.errors.getCount()>0){var b='<ul>';this.errors.each(function(a){b+=('<li id="x-err-'+a.field.id+'"><a href="#">'+a.msg+'</a></li>')},this);this.getMsgEl().update(b+'</ul>')}else{this.getMsgEl().update('')}},getMsgEl:function(){if(!this.msgEl){this.msgEl=Ext.DomHelper.append(Ext.getBody(),{cls:this.errorListCls+' x-hide-offsets'},true);this.msgEl.on('click',function(e){var t=e.getTarget('li',10,true);if(t){Ext.getCmp(t.id.split('x-err-')[1]).focus();this.hideErrors()}},this,{stopEvent:true})}return this.msgEl},showErrors:function(){this.updateErrorList();this.getMsgEl().alignTo(this.statusBar.getEl(),this.listAlign).slideIn('b',{duration:0.3,easing:'easeOut'});this.statusBar.setText(this.hideText);this.form.getEl().on('click',this.hideErrors,this,{single:true})},hideErrors:function(){var a=this.getMsgEl();if(a.isVisible()){a.slideOut('b',{duration:0.2,easing:'easeIn'});this.statusBar.setText(this.showText)}this.form.getEl().un('click',this.hideErrors,this)},onStatusClick:function(){if(this.getMsgEl().isVisible()){this.hideErrors()}else if(this.errors.getCount()>0){this.showErrors()}}});
Ext.ux.form.TreeComboSuperBox=Ext.extend(Ext.form.TriggerField,{displayField:null,displayFieldTpl:null,hiddenName:null,multiSelect:true,navigateItemsWithTab:true,resizable:false,treeConfig:{rootVisible:false,border:false,autoScroll:true,loaded:false,root:{nodeType:'async',expanded:true,uiProvider:false},loader:{url:'request.php'}},valueDelimiter:',',valueField:null,initComponent:function(){Ext.apply(this,{editable:false,triggerConfig:{cls:'x-superboxselect-btns',children:[{tag:'div',cls:'x-superboxselect-btn-expand'}]},items:new Ext.util.MixedCollection(false)});Ext.ux.form.TreeComboSuperBox.superclass.initComponent.call(this);this.constructTree()},onRender:function(a,b){var h=this.hiddenName;this.hiddenName=null;Ext.ux.form.TreeComboSuperBox.superclass.onRender.call(this,a,b);this.hiddenName=h;this.el.removeClass('x-form-text').addClass('x-superboxselect-input-field');this.wrapEl=this.el.wrap({tag:'ul'});this.outerWrapEl=this.wrapEl.wrap({tag:'div',cls:'x-form-text x-superboxselect'});this.inputEl=this.el.wrap({tag:'li',cls:'x-superboxselect-input'})},constructTree:function(){if(!this.treePanel){if(!this.treeWidth){this.treeWidth=Math.max(200,this.width||200)}if(!this.treeHeight){this.treeHeight=200}Ext.apply(this.treeConfig,{renderTo:Ext.getBody(),floating:true,autoScroll:true,minWidth:200,minHeight:200,width:this.treeWidth,height:this.treeHeight});if(!this.treeConfig.listeners)this.treeConfig.listeners={};Ext.apply(this.treeConfig.listeners,{hide:this.onTreeHide,show:this.onTreeShow,expandnode:this.onExpandOrCollapseNode,collapsenode:this.onExpandOrCollapseNode,resize:this.onTreeResize,scope:this});this.treePanel=new Ext.tree.TreePanel(this.treeConfig);this.treePanel.show();this.treePanel.hide();this.relayEvents(this.treePanel.loader,['beforeload','load','loadexception']);if(this.resizable){this.resizer=new Ext.Resizable(this.treePanel.getEl(),{pinned:true,handles:'se'});this.mon(this.resizer,'resize',function(r,w,h){this.treePanel.setSize(w,h)},this)}}},onTriggerClick:function(){this.treePanel.show();this.treePanel.getEl().alignTo(this.wrap,'tl-bl?')},onExpandOrCollapseNode:function(){if(!this.maxHeight||this.resizable)return;var a=this.treePanel.getTreeEl();var b=a.getHeight()-a.dom.clientHeight;var c=a.child('ul');var d=c.getHeight()+b;if(d>this.maxHeight)d=this.maxHeight;this.treePanel.setHeight(d)},onTreeResize:function(){if(this.treePanel)this.treePanel.getEl().alignTo(this.wrap,'tl-bl?')},onTreeShow:function(){Ext.getDoc().on('mousewheel',this.collapseIf,this);Ext.getDoc().on('mousedown',this.collapseIf,this)},onTreeHide:function(){Ext.getDoc().un('mousewheel',this.collapseIf,this);Ext.getDoc().un('mousedown',this.collapseIf,this)},collapseIf:function(e){if(!e.within(this.wrap)&&!e.within(this.treePanel.getEl())){this.collapse()}},collapse:function(){this.treePanel.hide()},getValue:function(){var b=[];this.items.each(function(a){b.push(a.value)});return b.join(this.valueDelimiter)},setValue:function(g){if(!this.rendered){this.value=g;return}this.removeAllItems();if(Ext.isEmpty(g)){return}var h=g;if(!Ext.isArray(g)){g=''+g;h=g.split(this.valueDelimiter)}if(this.multiSelect){Ext.each(h,function(a){var b=a;var c=a;var d=a;var e='';var f='';this.addItemBox(b,c,d,e,f)},this)}else{var i=h[0];var j=i;var k=i;var l=i;var m='';var n='';this.addItemBox(j,k,l,m,n)}},removeAllItems:function(){this.items.each(function(a){a.preDestroy(true)},this);return this},getCaption:function(a){if(typeof this.displayFieldTpl==='string'){this.displayFieldTpl=new Ext.XTemplate(this.displayFieldTpl)}var b;if(this.displayFieldTpl){b=this.displayFieldTpl.apply(a.attributes)}else if(this.displayField){b=a.attributes[this.displayField]}return b},addItemBox:function(b,c,d,e,f){var g=this.items;for(var i=0,len=g.getCount();i<len;++i){var h=g.get(i);if(h.value===b)return}if(!this.multiSelect)this.removeAllItems();var j;var k=Ext.id(null,'sbx-item');var h=new Ext.ux.form.SuperBoxSelectItem({owner:this,renderTo:this.wrapEl,caption:d,display:c,value:b,key:k,listeners:{'remove':function(a){if(this.fireEvent('beforeremoveitem',this,a.value)===false){return}this.items.removeKey(a.key)},destroy:function(){this.collapse();this.autoSize().validateValue()},scope:this}});h.render();j={tag:'input',type:'hidden',value:b,name:(this.hiddenName||this.name)};if(this.disabled){Ext.apply(j,{disabled:'disabled'})}h.hidden=this.el.insertSibling(j,'before');this.items.add(k,h);this.applyEmptyText().autoSize().validateValue();if(this.multiSelect)this.treePanel.getEl().alignTo(this.wrap,'tl-bl?');else this.collapse()},applyEmptyText:function(){this.setRawValue('');if(this.items.getCount()>0){this.el.removeClass(this.emptyClass);this.setRawValue('');return this}if(this.rendered&&this.emptyText&&this.getRawValue().length<1){this.setRawValue(this.emptyText);this.el.addClass(this.emptyClass)}return this},validateValue:function(a){if(this.items.getCount()===0){if(this.allowBlank){this.clearInvalid();return true}else{this.markInvalid(this.blankText);return false}}this.clearInvalid();return true},markInvalid:function(a){var b,t;if(!this.rendered||this.preventMark){return}this.outerWrapEl.addClass(this.invalidClass);a=a||this.invalidText;switch(this.msgTarget){case'qtip':Ext.apply(this.el.dom,{qtip:a,qclass:'x-form-invalid-tip'});Ext.apply(this.wrapEl.dom,{qtip:a,qclass:'x-form-invalid-tip'});if(Ext.QuickTips){Ext.QuickTips.enable()}break;case'title':this.el.dom.title=a;this.wrapEl.dom.title=a;this.outerWrapEl.dom.title=a;break;case'under':if(!this.errorEl){b=this.getErrorCt();if(!b){this.el.dom.title=a;break}this.errorEl=b.createChild({cls:'x-form-invalid-msg'});this.errorEl.setWidth(b.getWidth(true)-20)}this.errorEl.update(a);Ext.form.Field.msgFx[this.msgFx].show(this.errorEl,this);break;case'side':if(!this.errorIcon){b=this.getErrorCt();if(!b){this.el.dom.title=a;break}this.errorIcon=b.createChild({cls:'x-form-invalid-icon'})}this.alignErrorIcon();Ext.apply(this.errorIcon.dom,{qtip:a,qclass:'x-form-invalid-tip'});this.errorIcon.show();this.on('resize',this.alignErrorIcon,this);break;default:t=Ext.getDom(this.msgTarget);t.innerHTML=a;t.style.display=this.msgDisplay;break}this.fireEvent('invalid',this,a)},clearInvalid:function(){if(!this.rendered||this.preventMark){return}this.outerWrapEl.removeClass(this.invalidClass);switch(this.msgTarget){case'qtip':this.el.dom.qtip='';this.wrapEl.dom.qtip='';break;case'title':this.el.dom.title='';this.wrapEl.dom.title='';this.outerWrapEl.dom.title='';break;case'under':if(this.errorEl){Ext.form.Field.msgFx[this.msgFx].hide(this.errorEl,this)}break;case'side':if(this.errorIcon){this.errorIcon.dom.qtip='';this.errorIcon.hide();this.un('resize',this.alignErrorIcon,this)}break;default:var t=Ext.getDom(this.msgTarget);t.innerHTML='';t.style.display='none';break}this.fireEvent('valid',this)},alignErrorIcon:function(){if(this.wrap){this.errorIcon.alignTo(this.wrap,'tl-tr',[Ext.isIE?5:2,3])}},clearCurrentFocus:function(){if(this.currentFocus){this.currentFocus.onLnkBlur();this.currentFocus=null}return this},onResize:function(w,h,a,b){var c=Ext.isIE6?4:Ext.isIE7?1:Ext.isIE8?1:0;if(this.wrapEl){this._width=w;this.outerWrapEl.setWidth(w-c)}Ext.ux.form.TreeComboSuperBox.superclass.onResize.call(this,w,h,a,b);this.autoSize()},autoSize:function(){if(!this.rendered){return this}if(!this.metrics){this.metrics=Ext.util.TextMetrics.createInstance(this.el)}var a=this.el,v=a.dom.value,d=document.createElement('div');if(v===""&&this.emptyText&&this.items.getCount()<1){v=this.emptyText}d.appendChild(document.createTextNode(v));v=d.innerHTML;d=null;v+="&#160;";var w=Math.max(this.metrics.getWidth(v)+24,24);if(typeof this._width!='undefined'){w=Math.min(this._width,w)}this.el.setWidth(w);if(Ext.isIE){this.el.dom.style.top='0'}this.fireEvent('autosize',this,w);return this}});Ext.reg('treecombosuperbox',Ext.ux.form.TreeComboSuperBox);Ext.ux.form.SuperBoxSelectItem=function(a){Ext.apply(this,a);Ext.ux.form.SuperBoxSelectItem.superclass.constructor.call(this)};Ext.ux.form.SuperBoxSelectItem=Ext.extend(Ext.ux.form.SuperBoxSelectItem,Ext.Component,{initComponent:function(){Ext.ux.form.SuperBoxSelectItem.superclass.initComponent.call(this)},onElClick:function(e){var o=this.owner;o.clearCurrentFocus().collapse();if(o.navigateItemsWithTab){this.focus()}else{o.el.dom.focus();var a=this;(function(){this.onLnkFocus();o.currentFocus=this}).defer(10,this)}},onLnkClick:function(e){if(e){e.stopEvent()}this.preDestroy();if(!this.owner.navigateItemsWithTab){this.owner.el.focus()}},onLnkFocus:function(){this.el.addClass("x-superboxselect-item-focus");this.owner.outerWrapEl.addClass("x-form-focus")},onLnkBlur:function(){this.el.removeClass("x-superboxselect-item-focus");this.owner.outerWrapEl.removeClass("x-form-focus")},enableElListeners:function(){this.el.on('click',this.onElClick,this,{stopEvent:true});this.el.addClassOnOver('x-superboxselect-item x-superboxselect-item-hover')},enableLnkListeners:function(){this.lnk.on({click:this.onLnkClick,focus:this.onLnkFocus,blur:this.onLnkBlur,scope:this})},enableAllListeners:function(){this.enableElListeners();this.enableLnkListeners()},disableAllListeners:function(){this.el.removeAllListeners();this.lnk.un('click',this.onLnkClick,this);this.lnk.un('focus',this.onLnkFocus,this);this.lnk.un('blur',this.onLnkBlur,this)},onRender:function(a,b){Ext.ux.form.SuperBoxSelectItem.superclass.onRender.call(this,a,b);var d=this.el;if(d){d.remove()}this.el=d=a.createChild({tag:'li'},a.last());d.addClass('x-superboxselect-item');var e=this.owner.navigateItemsWithTab?(Ext.isSafari?'button':'a'):'span';var f=this.key;Ext.apply(d,{focus:function(){var c=this.down(e+'.x-superboxselect-item-close');if(c){c.focus()}},preDestroy:function(){this.preDestroy()}.createDelegate(this)});this.enableElListeners();d.update(this.caption);var g={tag:e,'class':'x-superboxselect-item-close',tabIndex:this.owner.navigateItemsWithTab?'0':'-1'};if(e==='a'){g.href='#'}this.lnk=d.createChild(g);if(!this.disabled){this.enableLnkListeners()}else{this.disableAllListeners()}this.on({disable:this.disableAllListeners,enable:this.enableAllListeners,scope:this});this.setupKeyMap()},setupKeyMap:function(){this.keyMap=new Ext.KeyMap(this.lnk,[{key:[Ext.EventObject.BACKSPACE,Ext.EventObject.DELETE,Ext.EventObject.SPACE],fn:this.preDestroy,scope:this},{key:[Ext.EventObject.RIGHT,Ext.EventObject.DOWN],fn:function(){this.moveFocus('right')},scope:this},{key:[Ext.EventObject.LEFT,Ext.EventObject.UP],fn:function(){this.moveFocus('left')},scope:this},{key:[Ext.EventObject.HOME],fn:function(){var l=this.owner.items.get(0).el.focus();if(l){l.el.focus()}},scope:this},{key:[Ext.EventObject.END],fn:function(){this.owner.el.focus()},scope:this},{key:Ext.EventObject.ENTER,fn:function(){}}]);this.keyMap.stopEvent=true},moveFocus:function(a){var b=this.el[a=='left'?'prev':'next']()||this.owner.el;b.focus.defer(100,b)},preDestroy:function(a){if(this.fireEvent('remove',this)===false){return}var b=function(){if(this.owner.navigateItemsWithTab){this.moveFocus('right')}this.hidden.remove();this.hidden=null;this.destroy()};if(a){b.call(this)}else{this.el.hide({duration:0.2,callback:b,scope:this})}return this},kill:function(){this.hidden.remove();this.hidden=null;this.purgeListeners();this.destroy()},onDisable:function(){if(this.hidden){this.hidden.dom.setAttribute('disabled','disabled')}this.keyMap.disable();Ext.ux.form.SuperBoxSelectItem.superclass.onDisable.call(this)},onEnable:function(){if(this.hidden){this.hidden.dom.removeAttribute('disabled')}this.keyMap.enable();Ext.ux.form.SuperBoxSelectItem.superclass.onEnable.call(this)},onDestroy:function(){Ext.destroy(this.lnk,this.el);Ext.ux.form.SuperBoxSelectItem.superclass.onDestroy.call(this)}});
// for form end

// for grid
Ext.ux.GridDragSelector=function(_1){_1=_1||{};var rs,objectsSelected=[];var _3,view,regions,proxy,tracker,selModel,scroller;var _4,mainRegion,dragRegion=new Ext.lib.Region(0,0,0,0);var _5=_1.dragSafe===true;var _6,shiftState,isDragging=false;var _7,scrollTop=0;this.init=function(_8){_3=_8;view=_3.getView();selModel=_3.getSelectionModel();_3.on("render",onRender);_3.on("bodyscroll",syncScroll);};function syncScroll(e){fillRegions();var _a=scroller.getScroll().top;scrollTop=_a-_7;if(isDragging){onDrag(e);}}function fillRegions(){rs=[];objectsSelected=[];rowObjects=[];var _b="div.x-grid3-row";var _c=view.el.dom;Ext.each(Ext.query(_b,_c),function(el){objectsSelected[objectsSelected.length]=selModel.isSelected(objectsSelected.length);rs[rs.length]=Ext.get(el).getRegion();});mainRegion=view.scroller.getRegion();_4=view.scroller.getRegion();Ext.dd.ScrollManager.register(view.scroller.dom);}function cancelClick(e){_6=e.ctrlKey;shiftState=e.shiftKey;_3.stopEditing();if(!_6&&!shiftState){selModel.clearSelections();}return false;}function onBeforeStart(e){if(e.getPageY()<=view.el.getY()+25){return false;}if(e.getPageX()>view.el.getX()+view.el.dom.clientWidth-20){return false;}return !_5||e.target==view.el.dom;}function onStart(e){if(!proxy){proxy=view.el.createChild({cls:"x-view-selector"});}else{proxy.setDisplayed("block");}cancelClick(e);fillRegions();_7=scroller.getScroll().top;syncScroll();isDragging=true;}function onDrag(e){var _12=tracker.startXY;var xy=tracker.getXY();if(scrollTop>=0){if((_12[1]-scrollTop)<=xy[1]){var y=_12[1]-scrollTop;var h=Math.abs(y-xy[1]);}else{var y=xy[1];var h=Math.abs(_12[1]-xy[1])-scrollTop;}var x=Math.min(_12[0],xy[0]);var w=Math.abs(_12[0]-xy[0]);_4.top-=scrollTop;}else{if((_12[1]-scrollTop)<xy[1]){var y=_12[1]-scrollTop;var h=Math.abs(y-xy[1]);}else{var y=xy[1];var h=Math.abs(_12[1]-xy[1])-scrollTop;}var x=Math.min(_12[0],xy[0]);var w=Math.abs(_12[0]-xy[0]);_4.bottom-=scrollTop;}dragRegion.left=x;dragRegion.top=y;dragRegion.right=x+w;dragRegion.bottom=y+h;dragRegion.constrainTo(_4);proxy.setRegion(dragRegion);for(var i=0,len=rs.length;i<len;i++){var r=rs[i],sel=dragRegion.intersect(r);var _22=selModel.isSelected(i);var _23=objectsSelected[i];if(_6){if(_23){if(sel&&_22){selModel.deselectRow(i);}else{if(!sel&&!_22){selModel.selectRow(i,true);}}}else{if(sel&&!_22){selModel.selectRow(i,true);}else{if(!sel&&_22){selModel.deselectRow(i);}}}}else{if(sel&&!_22){selModel.selectRow(i,true);}else{if(!sel&&_22){selModel.deselectRow(i);}}}}if(xy[1]+10>=mainRegion.bottom){scroller.scrollTo("top",scroller.getScroll().top+20);}if(xy[1]-10<=mainRegion.top){scroller.scrollTo("top",scroller.getScroll().top-20);}}function onEnd(e){if(proxy){proxy.setDisplayed(false);}isDragging=false;}function onRender(_25){tracker=new Ext.dd.DragTracker({onBeforeStart:onBeforeStart,onStart:onStart,onDrag:onDrag,onEnd:onEnd});tracker.initEl(_25.el);scroller=Ext.get(_3.getView().scroller);}};
Ext.grid.DetailDescRE=function(_1){Ext.apply(this,_1);Ext.grid.DetailDescRE.superclass.constructor.call(this);if(this.tpl){if(typeof this.tpl=="string"){this.tpl=new Ext.Template(this.tpl);}this.tpl.compile();}this.state={};this.bodyContent={};this.addEvents({beforeexpand:true,expand:true,beforecollapse:true,collapse:true});};Ext.extend(Ext.grid.DetailDescRE,Ext.util.Observable,{header:"",width:20,sortable:false,fixed:true,dataIndex:"",id:"expander",defExpand:false,lazyRender:true,enableCaching:true,getRowClass:function(_2,_3,p,ds){p.cols=p.cols-1;var _6=this.bodyContent[_2.id];if(_6==undefined){_6=this.getBodyContent(_2,_3);}if(_6){p.body=_6;}if(this.state[_2.id]==null)this.state[_2.id]=this.defExpand;return this.state[_2.id]?"x-grid3-row-expanded":"x-grid3-row-collapsed";},init:function(_7){this.grid=_7;var _8=_7.getView();_8.getRowClass=this.getRowClass.createDelegate(this);_8.enableRowBody=true;_7.on("render",function(){_8.mainBody.on("mousedown",this.onMouseDown,this);},this);},getBodyContent:function(_9,_a){if(!this.enableCaching){return this.tpl.apply(_9.data);}var _b=this.bodyContent[_9.id];if(!_b){_b=this.tpl.apply(_9.data);this.bodyContent[_9.id]=_b;}return _b;},onMouseDown:function(e,t){if(t.className=="x-grid3-row-expander"){e.stopEvent();var _e=e.getTarget(".x-grid3-row");this.toggleRow(_e);}},renderer:function(v,p,_11){p.cellAttr="rowspan=\"2\"";return "<div class=\"x-grid3-row-expander\">&#160;</div>";},beforeExpand:function(_12,_13,_14){if(this.fireEvent("beforexpand",this,_12,_13,_14)!==false){if(this.tpl&&this.lazyRender){_13.innerHTML=this.getBodyContent(_12,_14);}return true;}else{return false;}},toggleRow:function(row){if(typeof row=="number"){row=this.grid.view.getRow(row);}this[Ext.fly(row).hasClass("x-grid3-row-collapsed")?"expandRow":"collapseRow"](row);},expandRow:function(row){if(typeof row=="number"){row=this.grid.view.getRow(row);}var _17=this.grid.store.getAt(row.rowIndex);var _18=Ext.DomQuery.selectNode("tr:nth(2) div.x-grid3-row-body",row);if(this.beforeExpand(_17,_18,row.rowIndex)){this.state[_17.id]=true;Ext.fly(row).replaceClass("x-grid3-row-collapsed","x-grid3-row-expanded");this.fireEvent("expand",this,_17,_18,row.rowIndex);}},collapseRow:function(row){if(typeof row=="number"){row=this.grid.view.getRow(row);}var _1a=this.grid.store.getAt(row.rowIndex);var _1b=Ext.fly(row).child("tr:nth(1) div.x-grid3-row-body",true);if(this.fireEvent("beforcollapse",this,_1a,_1b,row.rowIndex)!==false){this.state[_1a.id]=false;Ext.fly(row).replaceClass("x-grid3-row-expanded","x-grid3-row-collapsed");this.fireEvent("collapse",this,_1a,_1b,row.rowIndex);}}});		
Ext.grid.CheckColumn=function(config){Ext.apply(this,config);if(!this.id){this.id=Ext.id();}this.renderer=this.renderer.createDelegate(this);};Ext.grid.CheckColumn.prototype={init:function(grid){this.grid=grid;this.grid.on('render',function(){var view=this.grid.getView();view.mainBody.on('mousedown',this.onMouseDown,this);},this);},onmousedown:function(e,t){if(t.className&&t.className.indexOf('x-grid3-cc-'+this.id)!=-1){e.stopEvent();var index=this.grid.getView().findRowIndex(t);var record=this.grid.store.getAt(index);record.set(this.dataIndex,!record.data[this.dataIndex]);}},renderer:function(v,p,r){p.css+=' x-grid3-check-col-td'; return '<div class="x-grid3-check-col'+(v?'-on':'')+' x-grid3-cc-'+this.id+'">&#160;</div>';}};
Ext.grid.GroupSummary=function(a){Ext.apply(this,a)};Ext.extend(Ext.grid.GroupSummary,Ext.util.Observable,{init:function(a){this.grid=a;this.cm=a.getColumnModel();this.view=a.getView();var v=this.view;v.doGroupEnd=this.doGroupEnd.createDelegate(this);v.afterMethod('onColumnWidthUpdated',this.doWidth,this);v.afterMethod('onAllColumnWidthsUpdated',this.doAllWidths,this);v.afterMethod('onColumnHiddenUpdated',this.doHidden,this);v.afterMethod('onUpdate',this.doUpdate,this);v.afterMethod('onRemove',this.doRemove,this);if(!this.rowTpl){this.rowTpl=new Ext.Template('<div class="x-grid3-summary-row" style="{tstyle}">','<table class="x-grid3-summary-table" border="0" cellspacing="0" cellpadding="0" style="{tstyle}">','<tbody><tr>{cells}</tr></tbody>','</table></div>');this.rowTpl.disableFormats=true}this.rowTpl.compile();if(!this.cellTpl){this.cellTpl=new Ext.Template('<td class="x-grid3-col x-grid3-cell x-grid3-td-{id} {css}" style="{style}">','<div class="x-grid3-cell-inner x-grid3-col-{id}" unselectable="on">{value}</div>',"</td>");this.cellTpl.disableFormats=true}this.cellTpl.compile()},toggleSummaries:function(a){var b=this.grid.getGridEl();if(b){if(a===undefined){a=b.hasClass('x-grid-hide-summary')}b[a?'removeClass':'addClass']('x-grid-hide-summary')}},renderSummary:function(o,a){a=a||this.view.getColumnData();var b=this.cm.config;var d=[],c,p={},cf,last=a.length-1;for(var i=0,len=a.length;i<len;i++){c=a[i];cf=b[i];p.id=c.id;p.style=c.style;p.css=i==0?'x-grid3-cell-first ':(i==last?'x-grid3-cell-last ':'');if(cf.summaryType||cf.summaryRenderer){p.value=(cf.summaryRenderer||c.renderer)(o.data[c.name],p,o)}else{p.value=''}if(p.value==undefined||p.value==="")p.value="&#160;";d[d.length]=this.cellTpl.apply(p)}return this.rowTpl.apply({tstyle:'width:'+this.view.getTotalWidth()+';',cells:d.join('')})},calculate:function(a,b){var d={},r,c,cfg=this.cm.config,cf;for(var j=0,jlen=a.length;j<jlen;j++){r=a[j];for(var i=0,len=b.length;i<len;i++){c=b[i];cf=cfg[i];if(cf.summaryType){d[c.name]=Ext.grid.GroupSummary.Calculations[cf.summaryType](d[c.name]||0,r,c.name,d)}}}return d},doGroupEnd:function(a,g,b,c,d){var e=this.calculate(g.rs,b);a.push('</div>',this.renderSummary({data:e},b),'</div>')},doWidth:function(a,w,b){var c=this.view.getGroups(),s;for(var i=0,len=c.length;i<len;i++){s=c[i].childNodes[2];s.style.width=b;s.firstChild.style.width=b;s.firstChild.rows[0].childNodes[a].style.width=w}},doAllWidths:function(a,b){var c=this.view.getGroups(),s,cells,wlen=a.length;for(var i=0,len=c.length;i<len;i++){s=c[i].childNodes[2];s.style.width=b;s.firstChild.style.width=b;cells=s.firstChild.rows[0].childNodes;for(var j=0;j<wlen;j++){cells[j].style.width=a[j]}}},doHidden:function(a,b,c){var d=this.view.getGroups(),s,display=b?'none':'';for(var i=0,len=d.length;i<len;i++){s=d[i].childNodes[2];s.style.width=c;s.firstChild.style.width=c;s.firstChild.rows[0].childNodes[a].style.display=display}},refreshSummary:function(a){return this.refreshSummaryById(this.view.getGroupId(a))},getSummaryNode:function(a){var g=Ext.fly(a,'_gsummary');if(g){return g.down('.x-grid3-summary-row',true)}return null},refreshSummaryById:function(a){var g=document.getElementById(a);if(!g){return false}var b=[];this.grid.store.each(function(r){if(r._groupId==a){b[b.length]=r}});var c=this.view.getColumnData();var d=this.calculate(b,c);var e=this.renderSummary({data:d},c);var f=this.getSummaryNode(a);if(f){g.removeChild(f)}Ext.DomHelper.append(g,e);return true},doUpdate:function(a,b){this.refreshSummaryById(b._groupId)},doRemove:function(a,b,c,d){if(!d){this.refreshSummaryById(b._groupId)}},showSummaryMsg:function(a,b){var c=this.view.getGroupId(a);var d=this.getSummaryNode(c);if(d){d.innerHTML='<div class="x-grid3-summary-msg">'+b+'</div>'}}});Ext.grid.GroupSummary.Calculations={'sum':function(v,a,b){return v+(a.data[b]||0)},'count':function(v,a,b,c){return c[b+'count']?++c[b+'count']:(c[b+'count']=1)},'max':function(v,a,b,c){var v=a.data[b];var d=c[b+'max']===undefined?(c[b+'max']=v):c[b+'max'];return v>d?(c[b+'max']=v):d},'min':function(v,a,b,c){var v=a.data[b];var d=c[b+'min']===undefined?(c[b+'min']=v):c[b+'min'];return v<d?(c[b+'min']=v):d},'average':function(v,a,b,d){var c=d[b+'count']?++d[b+'count']:(d[b+'count']=1);var t=(d[b+'total']=((d[b+'total']||0)+(a.data[b]||0)));return t===0?0:t/c}};Ext.grid.HybridSummary=Ext.extend(Ext.grid.GroupSummary,{calculate:function(a,b){var c=this.view.getGroupField();var d=a[0].data[c];var e=this.getSummaryData(d);return e||Ext.grid.HybridSummary.superclass.calculate.call(this,a,b)},updateSummaryData:function(a,b,c){var d=this.grid.store.reader.jsonData;if(!d.summaryData){d.summaryData={}}d.summaryData[a]=b;if(!c){this.refreshSummary(a)}},getSummaryData:function(a){var b=this.grid.store.reader.jsonData;if(b&&b.summaryData){return b.summaryData[a]}return null}});
// for grid end